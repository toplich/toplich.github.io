[{"categories":["Backup","Infrastructure"],"content":"ğŸ” Veeam Backup: Best Practices and Configuration Guide Veeam Backup \u0026 Replication is a powerful tool for protecting your data across virtual, physical, and cloud environments. This article focuses on key architectural decisions, backup security best practices, and real-world deployment scenarios. ","date":"2025-06-26","objectID":"/posts/veeam/:0:0","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"ğŸ” Secure Backup with Immutability Why This Matters Immutability is the foundation of a secure backup strategy. It protects your backups from ransomware, human error, and malicious insiders by making data undeletable for a defined retention period. ","date":"2025-06-26","objectID":"/posts/veeam/:1:0","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"1.1 âœ¨ Use Immutable Storage â–¶ Recommended Linux Configuration # Format disk with reflink support sudo mkfs.xfs -m reflink=1 /dev/sdb sudo mkdir -p /mnt/veeam sudo mount /dev/sdb /mnt/veeam # Create hardened backup user sudo useradd -m -s /sbin/nologin veeamrepo sudo chown veeamrepo: /mnt/veeam Use XFS with reflink for Veeam immutability Mount target to /mnt/veeam Configure in Veeam as â€œHardened Repositoryâ€ Best Practice Never use root for backup repositories. Harden access with non-root accounts and disable SSH password login. ","date":"2025-06-26","objectID":"/posts/veeam/:1:1","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"1.2 ğŸ”’ S3 Object Lock \u0026 Retention â–¶ Setup S3 Bucket with Object Lock (e.g., MinIO, AWS) Create a bucket with Object Lock enabled Enable Versioning Set default retention policy (e.g., 30 days) # Example with MinIO Client mc alias set minio https://minio.example.com minioadmin minioadmin mc retention set --default GOVERNANCE 30d minio/veeam --insecure Security Tip Assign write-only access for Veeam user to prevent accidental or malicious deletions. ","date":"2025-06-26","objectID":"/posts/veeam/:1:2","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"1.3 ğŸ”„ Apply the 3-2-1-1-0 Rule Backup Strategy 3 copies of data (1 production + 2 backups) 2 different media types (e.g., disk + object storage) 1 offsite backup 1 immutable copy 0 errors after recovery verification (e.g., SureBackup) ","date":"2025-06-26","objectID":"/posts/veeam/:1:3","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"1.4 ğŸ” Limit Access \u0026 Isolate Backup Networks â–¶ Network \u0026 Identity Hardening Use separate credentials for: Backup console Repositories Hypervisors S3 buckets Protect backup console with: Multi-Factor Authentication (2FA) Role-Based Access Control (RBAC) Isolate repository access with: VLAN segmentation Firewall rules SSH key-only access Do Not Never expose repositories directly to the internet. Backup data should only be reachable via secured Veeam components. ","date":"2025-06-26","objectID":"/posts/veeam/:1:4","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"1.5 ğŸ“Š Monitoring \u0026 Patching â–¶ Stay Ahead of Threats Enable email notifications for job results and warnings Regularly review backup logs and audit access Apply Veeam updates and patches promptly Integrate with monitoring platforms (e.g., Zabbix, Icinga) Pro Tip Schedule periodic restore tests and SureBackup jobs to validate recovery integrity. ","date":"2025-06-26","objectID":"/posts/veeam/:1:5","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"âš™ï¸ Initial Setup of Veeam B\u0026R Overview Before configuring backup jobs, Veeam must be properly installed and its infrastructure components set up. This includes the main server, proxies, repositories, and connections to hypervisors. ","date":"2025-06-26","objectID":"/posts/veeam/:2:0","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"2.1 ğŸ–¥ Install Veeam Backup \u0026 Replication â–¶ System Requirements Operating System: Windows Server 2016 or newer SQL Server: Use built-in SQL Express or an external instance Hardware: 2+ vCPUs 8+ GB RAM (16 GB recommended) SSD for configuration and database preferred â–¶ Installation Steps Download Veeam B\u0026R ISO Mount ISO and run Setup.exe Choose Backup \u0026 Replication Follow the wizard and install: Veeam Backup Service Console Explorers Transport \u0026 Catalog Services ","date":"2025-06-26","objectID":"/posts/veeam/:2:1","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"2.2 ğŸ§± Add Backup Infrastructure â–¶ Add Hypervisors Go to Backup Infrastructure \u003e Managed Servers Add: VMware vCenter Server or Microsoft Hyper-V hosts Use service accounts with minimal required permissions. â–¶ Add Backup Proxies Navigate to Backup Infrastructure \u003e Backup Proxies Add Windows Server (VM or physical) Assign transport mode: Direct SAN Access Hot-Add (for VMware) Network (NBD) â–¶ Add Repositories Supported types: âœ… Linux repo (XFS + reflink for immutability) âœ… Windows repo (ReFS for fast clone) âœ… NAS (SMB/NFS, no immutability) âœ… S3-compatible object storage Use the appropriate wizard to configure credentials and paths. ","date":"2025-06-26","objectID":"/posts/veeam/:2:2","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"2.3 ğŸ“¦ Create Backup Jobs â–¶ Job Configuration Steps Go to Home \u003e Jobs \u003e Backup Job (VMs) Choose source: VMs, physical agents, or NAS Select a repository (e.g., Hardened Linux, S3, iSCSI) Set backup mode: Incremental Forever Forward Incremental Define retention policy (e.g., 14 restore points) (Optional) Enable: Synthetic Full backups Health Checks Backup Copy Best Practice Assign each job to a repository that matches its role: fast storage for daily, immutable for long-term. ","date":"2025-06-26","objectID":"/posts/veeam/:2:3","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"2.4 âš™ï¸ Enable Optional Jobs â–¶ Optional Job Types Backup Copy Job For offsite or secondary backup SureBackup Job Automatically boots and verifies backups Replication Job Creates hot standby VMs at DR location ","date":"2025-06-26","objectID":"/posts/veeam/:2:4","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"2.5 ğŸ” Monitor and Test â–¶ Recommended Monitoring Enable email notifications Check job logs and statistics regularly Integrate with external monitoring (Zabbix, Icinga) â–¶ Restore Testing Options Full VM restore File-level restore Application-item restore (Exchange, SQL, etc.) Instant VM Recovery Schedule test restores at least once per month. ","date":"2025-06-26","objectID":"/posts/veeam/:2:5","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"ğŸ’¾ Choosing the Right Repository Choosing the correct repository type is fundamental to achieving the right balance of performance, cost-efficiency, immutability, and remote readiness. Repository Types Explained Veeam supports a variety of repository types that differ in performance, immutability, remote access, and compliance readiness. ","date":"2025-06-26","objectID":"/posts/veeam/:3:0","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"3.1 ğŸ—ƒï¸ Common Repository Types ReFS (Windows) âœ… Fast clone support âŒ No immutability âš ï¸ Needs VPN for remote usage XFS (Linux) âœ… Reflink support âœ… Immutability (when used in hardened mode) âŒ No native remote access Hardened Linux Repository ğŸ” Secure non-root access âœ… Immutability with XFS âŒ Requires SSH (not S3-compatible) NAS (SMB/NFS) ğŸŸ¡ Easy to set up âŒ No immutability âœ… Can be remote (mountable) S3-Compatible (MinIO, AWS, Wasabi) âœ… Object Lock âœ… Versioning âœ… TLS support âœ… Ideal for long-term, remote, immutable storage iSCSI over VPN (e.g., via WireGuard) âœ… Block-level performance âœ… Remote access âš ï¸ Needs manual configuration and secure tunneling ","date":"2025-06-26","objectID":"/posts/veeam/:3:1","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"3.2 ğŸ“Š Repository Comparison Table Repository Type Fast Clone Immutability Remote-Ready TLS R3FS (Windows) âœ… âŒ âš ï¸ (VPN req.) âŒ XFS (Linux) âœ… âœ… (hardened) âŒ âŒ S3 (MinIO/AWS/Wasabi) âŒ âœ… âœ… âœ… NAS (SMB/NFS) âŒ âŒ âœ… âŒ ğŸ›¡ï¸ Immutability Options Linux Hardened Repo: âœ… (XFS + reflink) S3 with Object Lock: âœ… (MinIO, AWS, Wasabi) Windows ReFS: âŒ SMB/NFS: âŒ Recommendations Use Hardened Linux Repo for on-prem immutable storage Use S3 with Object Lock for offsite long-term protection Avoid NAS or standard Windows ReFS for critical or immutable backup chains ","date":"2025-06-26","objectID":"/posts/veeam/:3:2","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"ğŸš€ Backup Copy Jobs (Offsite Protection) A Backup Copy Job is essential for offsite disaster recovery. It allows you to replicate your primary backups to a secondary location â€” protecting against ransomware, hardware failure, or site outages. Use Case Youâ€™re backing up VMs to a local repository (e.g., Windows ReFS or NAS) and want to replicate them to an offsite, immutable Hardened Linux Repository. ","date":"2025-06-26","objectID":"/posts/veeam/:4:0","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"4.1 ğŸ›¡ Why Use Hardened Linux âœ… Immutable storage with XFS + reflink ğŸ‘¤ Non-root user, no interactive shell ğŸ” Resilient against ransomware â€” even if Veeam is compromised ","date":"2025-06-26","objectID":"/posts/veeam/:4:1","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"4.2 ğŸ”§ Configuration Steps â–¶ Step 1: Prepare the Hardened Linux Repository # Format the disk sudo mkfs.xfs -m reflink=1 /dev/sdb sudo mount /dev/sdb /mnt/veeam # Create veeamrepo user sudo useradd -m -s /sbin/nologin veeamrepo sudo chown veeamrepo: /mnt/veeam âœ… Enable SSH key login âœ… Grant temporary sudo during setup ğŸ”’ Disable password auth after configuration â–¶ Step 2: Add Repository to Veeam Go to Backup Infrastructure \u003e Backup Repositories \u003e Add Repository Choose Linux Hardened Repository Enter: IP address SSH credentials Public key path Set mount path (e.g. /mnt/veeam) Enable Immutability (e.g., 30 days) â–¶ Step 3: Create the Backup Copy Job Navigate to Home \u003e Backup Copy \u003e Backup Copy Job (VMs) Select the primary job as source Choose Hardened Linux Repository as target Set: Immediate copy mode: âœ… (optional) Copy every 12â€¯h, retain 7 restore points 4.3 ğŸ’¡ Best Practices Best Practices ğŸ§ª Enable Health Checks to validate copy integrity ğŸ”„ Use WAN Accelerators if bandwidth is limited â³ Keep immutable retention longer than source (e.g., 30 days vs 14 days) ğŸ“¬ Enable email alerts on failure 4.4 ğŸ“Œ Summary Summary ğŸ” Backup Copy Jobs + Hardened Repo = Secure Offsite Copies ğŸ§± Protects against ransomware \u0026 data loss â˜‘ï¸ Meets the 3-2-1-1-0 backup rule ğŸ” Runs automatically, no scripting required ","date":"2025-06-26","objectID":"/posts/veeam/:4:2","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"ğŸ“† Scale-Out Backup Repository (SOBR) A SOBR (Scale-Out Backup Repository) combines multiple backup repositories into a single logical unit. This allows flexible storage tiering, improved performance, and simplified management. Use Case Daily backups go to a local NAS (iSCSI, ReFS 64 KB), while older backups are moved to a remote MinIO S3 bucket with Object Lock enabled. ","date":"2025-06-26","objectID":"/posts/veeam/:5:0","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"5.1 ğŸ§± Tiered Storage Strategy Performance Tier ğŸ“ Local NAS with iSCSI mount ğŸ“ ReFS formatted with 64 KB block size âš¡ High-speed storage for daily restore operations Capacity Tier ğŸŒ Remote MinIO S3 bucket ğŸ” Object Lock + versioning enabled ğŸ—„ Ideal for long-term archival and compliance with immutability ","date":"2025-06-26","objectID":"/posts/veeam/:5:1","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"5.2 ğŸ”§ SOBR Configuration Steps â–¶ Step 1: Create Individual Repositories Format the local NAS volume with ReFS 64 KB Add it to Veeam as a Direct Attached Repository Deploy MinIO: Enable TLS, versioning, and Object Lock Create the S3 bucket for backups Add the bucket to Veeam as an S3-Compatible Object Repository Enable immutability (e.g., 30 days Governance mode) â–¶ Step 2: Create and Configure the SOBR Navigate to Backup Infrastructure \u003e Scale-Out Repositories Click Add SOBR Set a name (e.g., SOBR-Primary-Remote) Add: Local ReFS repo as the Performance Tier MinIO S3 repo as the Capacity Tier Enable the following options: âœ… Move backups older than 14 days to capacity âœ… Copy backups as soon as they are created (optional) âœ… Support immutability on capacity tier ","date":"2025-06-26","objectID":"/posts/veeam/:5:2","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"5.3 ğŸ“Š SOBR Benefits Why Use SOBR? ğŸš€ Automatically tier backups based on age or policy ğŸŒ Combines high-performance local storage with remote S3 storage ğŸ” Enables compliance with immutability and offsite protection âš™ï¸ Simplifies management without scripting ","date":"2025-06-26","objectID":"/posts/veeam/:5:3","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"ğŸ§  Setting Up Efficient Backup Proxies Backup Proxies in Veeam act as data movers between the source (e.g., hypervisors) and the backup repositories. A well-configured proxy infrastructure is essential for performance, scalability, and job reliability. What Is a Proxy? A backup proxy retrieves data from the source (e.g., VMware, Hyper-V), processes it (compression, deduplication, encryption), and sends it to the backup repository. Proxies reduce load on the main backup server. ","date":"2025-06-26","objectID":"/posts/veeam/:6:0","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"6.1 ğŸ§© Default vs Additional Proxies By default, the Veeam Backup Server acts as a proxy In larger or distributed environments, additional proxies are highly recommended Multiple proxies allow parallel job processing and workload isolation ","date":"2025-06-26","objectID":"/posts/veeam/:6:1","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"6.2 âš™ï¸ Add and Configure Proxies â–¶ Step 1: Add a New Proxy Open Veeam Backup \u0026 Replication Console Go to Backup Infrastructure \u003e Backup Proxies Click Add Proxy Choose: Platform: VMware vSphere or Microsoft Hyper-V Server: Select existing Windows Server or deploy automatically â–¶ Step 2: Configure Transport Mode Modes: ğŸ”„ Automatic â€“ Veeam chooses the best mode ğŸ“¦ Direct SAN Access â€“ best for fibre/iSCSI environments ğŸ”§ Virtual Appliance (Hot-Add) â€“ efficient for virtual proxies ğŸŒ Network (NBD/NFS) â€“ fallback, least efficient Set maximum concurrent tasks based on CPU/RAM (e.g., 4â€“8) ","date":"2025-06-26","objectID":"/posts/veeam/:6:2","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"6.3 ğŸ” Monitoring and Scaling Proxy Scaling Tips Place proxies close to production storage for better performance Use dedicated proxies instead of sharing with repositories For distributed sites, deploy proxies locally Monitor proxy usage in job stats and scale accordingly Use DRS affinity rules in clusters to optimize job placement Recommended Platforms âœ… Windows Server 2019+ is stable and performant ğŸ§ª Linux proxies are available in experimental mode (CLI only) ","date":"2025-06-26","objectID":"/posts/veeam/:6:3","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"ğŸŒ Optimizing WAN Transfers with Accelerators Veeam WAN Accelerators optimize backup data transfer across slow or unreliable WAN links. They are especially useful for Backup Copy Jobs to remote sites or disaster recovery (DR) locations. When to Use WAN Acceleration Use WAN Accelerators when transferring backup data between sites with limited bandwidth, high latency, or inconsistent connectivity. ","date":"2025-06-26","objectID":"/posts/veeam/:7:0","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"7.1 ğŸš€ What WAN Accelerators Do ğŸ” Global deduplication: Avoids re-sending already transferred blocks ğŸ—‚ Global cache: Stores repeated data patterns ğŸ“¦ Compression \u0026 optimization: Minimizes bandwidth usage ğŸ“‰ Traffic reduction: Up to 50x savings on repeated transfers ","date":"2025-06-26","objectID":"/posts/veeam/:7:1","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"7.2 âš™ï¸ How to Configure WAN Acceleration â–¶ Step 1: Prepare the Accelerator Server Use a dedicated Windows Server (physical or VM) Recommended resources: 2+ vCPU 4+ GB RAM Fast disk (SSD/NVMe) for cache (e.g., 40â€“100 GB) â–¶ Step 2: Add WAN Accelerators in Veeam Go to Backup Infrastructure \u003e WAN Accelerators Click Add WAN Accelerator Select your Windows server Define: Cache path (dedicated volume preferred) Cache size (recommend 1â€“3% of protected data) Max concurrent tasks Repeat this step for both source and target sites. â–¶ Step 3: Use in Backup Copy Job Edit or create a Backup Copy Job In the Data Transfer step: Enable Use WAN Accelerators Select: Source WAN Accelerator (e.g., local site) Target WAN Accelerator (e.g., remote site) Complete job configuration ","date":"2025-06-26","objectID":"/posts/veeam/:7:2","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"7.3 ğŸ’¡ Best Practices Tips for Efficient WAN Transfers ğŸ§  Place WAN Accelerators close to the repository ğŸ’½ Use a separate disk for cache â€” not shared with OS or backups ğŸ›¡ Enable TLS or VPN if WAN is untrusted ğŸ“Š Monitor cache health and usage via Veeam UI ğŸ§ª Test throughput before and after to confirm benefit Edition Requirement WAN acceleration is available only in Veeam Enterprise or Enterprise Plus editions. ","date":"2025-06-26","objectID":"/posts/veeam/:7:3","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["Backup","Infrastructure"],"content":"ğŸ“ Final Recommendations âœ… Plan for 3-2-1-1-0 strategy. âœ… Always use immutability. âœ… Test restores monthly. âœ… Secure credentials and infrastructure. âœ… Enable alerts, health checks, and patch regularly. A well-designed Veeam deployment delivers security, scalability, and disaster resilience â€” even for small environments. ","date":"2025-06-26","objectID":"/posts/veeam/:8:0","tags":["Veeam","Backup","Immutability","S3","Linux","Security"],"title":"Veeam Backup: Best Practices and Configuration Guide","uri":"/posts/veeam/"},{"categories":["networking"],"content":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support If your NAS or Linux host does not support the WireGuard kernel module â€” like the Synology DS220+ â€” you can still run a secure WireGuard tunnel using Docker and wireguard-go. This article walks you through the full setup with downloadable examples and scripts. ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:0:0","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"ğŸ«  Why This Setup? Many embedded Linux systems (e.g., Synology NAS, LXC, OpenVZ VPS) lack support for kernel modules like wireguard.ko. Fortunately, the Go-based wireguard-go project allows running WireGuard entirely in user space. When combined with Docker, it enables a portable and rootless VPN tunnel. ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:1:0","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"ğŸ”§ What Youâ€™ll Achieve A working WireGuard VPN tunnel inside a Docker container Fully functional without kernel support Persistent setup for backup, replication, or remote access Ready-to-use configuration and generation scripts ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:2:0","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"ğŸ“š Requirements Synology DS220+ (or similar Linux NAS) Docker and SSH/root access x86_64 architecture (for the provided binary) ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:3:0","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"ğŸ“ Folder Structure wg-peer/ â”œâ”€â”€ Dockerfile â”œâ”€â”€ docker-compose.yml â”œâ”€â”€ entrypoint.sh â”œâ”€â”€ wireguard-go # Precompiled user-space binary â”œâ”€â”€ wg0.conf # WireGuard peer config â”œâ”€â”€ genkeys.sh # Key + config generator â”œâ”€â”€ install.sh # Curl-based installer â”œâ”€â”€ watchdog_wg.sh # Optional cron watchdog â”œâ”€â”€ README.md ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:4:0","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"ğŸš€ Quick Setup Before starting the tunnel, follow these steps to prepare the environment. ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:5:0","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"âœ… 1. Download Files Use the install script to download all necessary files: curl -fsSL https://run.topli.ch/docker/wg-peer/install.sh | bash cd wg-peer ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:5:1","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"ğŸ” 2. Generate WireGuard Keys Run the key generation script: ./genkeys.sh This will: Generate a PrivateKey and PublicKey using a temporary container Save a template wg0.conf file in the current directory ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:5:2","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"âœï¸ 3. Edit wg0.conf Open the generated file and update the following: PublicKey of your WireGuard server Endpoint â€” IP or domain of the server (e.g. vpn.example.com:51820) Optional: update Address or AllowedIPs to match your network ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:5:3","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"ğŸŒ 4. Ensure Network Access Make sure: UDP port 51820 (or the one used) is open on your server The system supports --privileged Docker containers Host network mode is available (network_mode: host) ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:5:4","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"â–¶ï¸ 5. Start the Tunnel Now you can build and run the container: docker-compose up -d --build To check if the tunnel is working: docker exec -it wg-peer wg show ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:5:5","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"ğŸ›€ Example wg0.conf [Interface] PrivateKey = \u003cyour_private_key\u003e Address = 10.10.1.6/32 [Peer] PublicKey = \u003cserver_public_key\u003e Endpoint = \u003cyour-server-ip\u003e:51820 AllowedIPs = 0.0.0.0/0 PersistentKeepalive = 25 ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:6:0","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"ğŸšš Launch Container Manually If not using docker-compose, run manually: docker build -t wg-peer . docker run -d --name wg-peer --privileged --network host wg-peer Use --privileged and --network host to allow full tunnel capabilities. ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:7:0","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"ğŸ§¾ View Logs and Debug To view logs from the running container: docker logs wg-peer To enter the containerâ€™s shell (for inspection or testing): docker exec -it wg-peer bash From inside the container, you can also run: wg show to check tunnel status directly. ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:8:0","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"â™»ï¸ Clean Shutdown \u0026 Restart docker stop wg-peer docker start wg-peer ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:9:0","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"ğŸ›¡ Watchdog via Cron (optional) Monitor tunnel health and auto-restart if down: crontab -e Add: */5 * * * * /path/to/wg-peer/watchdog_wg.sh \u003e\u003e /var/log/wg-watchdog.log 2\u003e\u00261 ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:10:0","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"ğŸ”§ Manually Compile wireguard-go (if needed) apt install -y golang git git clone https://git.zx2c4.com/wireguard-go cd wireguard-go go build cp wireguard /usr/bin/wireguard-go chmod +x /usr/bin/wireguard-go ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:11:0","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":["networking"],"content":"ğŸ”— Useful Links ğŸ” WireGuard Documentation ğŸ“‚ GitHub Source Files ğŸ“… Install Script ğŸ” Full README ï¸âƒ£ Need help with customization or scaling? Reach out via blog.topli.ch or GitHub. Â© 2025 run.topli.ch ","date":"2025-06-09","objectID":"/posts/wireguard-docker/:12:0","tags":["WireGuard","Docker","Networking","Synology","NAS","VPN","Userspace","DevOps"],"title":"How to Run a WireGuard Tunnel Inside a Docker Container Without Kernel Support","uri":"/posts/wireguard-docker/"},{"categories":null,"content":"1. Creating and Configuring a VMware Cluster â”Œ â”‚ â”” â”€ â”€ â”€ E â”€ â”€ S â”€ â”€ X â”€ â”Œ â–¼ i â”€ â”€ â”€ â”€ â”€ â”€ 1 â”€ â”€ â”€ â”€ â”Œ â”‚ â”‚ â”” â”€ â” â”‚ â”˜ â”€ â”€ â”€ â”€ [ â”€ â”€ â”€ D â”€ â”€ â”€ V R â”€ â”€ â”€ M S â”€ â”€ â”€ w â”€ â”€ â”€ a + â”€ â”€ â”€ r â”€ â”€ [ â”€ e H â”€ â”€ . - A â”¬ â”¼ â–¼ . â”€ C â”€ â”€ . â”€ l + â”€ â”€ ] â”€ u â”€ â”€ â”€ s v â”€ â”€ â”€ t S â”€ â”€ â”€ e A â”€ â”€ â”€ r N â”€ â”€ â”€ ] â”€ â”€ â”€ â”€ â”€ â” â”‚ â”‚ â”˜ â”€ â”Œ â”‚ â”” â”€ â”€ â”€ â”€ â”€ E â”€ â”€ â”€ S â”€ â” â–¼ X â”€ â”€ i â”€ â”€ â”€ â”€ N â”€ â”€ â”€ â” â”‚ â”˜ Creating a cluster in VMware vCenter is the foundational step for enabling features like High Availability (HA), Distributed Resource Scheduler (DRS), and vSAN. This section will guide you through the basic steps to create a production-ready cluster and connect ESXi hosts. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:1:0","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ“Œ Prerequisites A functioning vCenter Server instance. At least 2 ESXi hosts (3+ recommended for full vSAN functionality). Proper IP connectivity between hosts and vCenter. DNS resolution working across the environment. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:1:1","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ›  Step-by-Step: Cluster Creation Log into vCenter using the vSphere Web Client. In the left navigation pane, right-click your Datacenter and choose: New Cluster Provide a meaningful name for your cluster (e.g., Production-Cluster). Enable the following features: âœ… DRS â€“ Automatically balances workloads between hosts. âœ… HA â€“ Ensures VM restart in case of host failure. âœ… vSAN â€“ Enables distributed storage (if applicable). Click Next and complete the wizard. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:1:2","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"â• Adding Hosts to the Cluster After the cluster is created: Select the cluster name, then click Add Hosts. Provide the hostname/IP of each ESXi server. Enter root credentials and validate the connection. Review and confirm SSL thumbprint. Finish the wizard to add the host. Repeat this step for each ESXi host in your environment. âš ï¸ If your ESXi hosts already contain virtual machines and vSwitches, ensure you migrate networking and storage configurations appropriately before or after adding them to the cluster. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:1:3","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"âœ… Initial Cluster Configuration After adding the hosts, you can further configure the cluster: Configure host licensing. Review network redundancy (dual NICs recommended). Set up vMotion and VMkernel adapters. (Optional) Prepare for vSAN or shared storage. Enable EVC (Enhanced vMotion Compatibility) if mixing CPU generations. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:1:4","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ¯ Best Practices Name the cluster based on its function: Mgmt-Cluster, App-Cluster, Test-Cluster, etc. Always validate hardware compatibility via the VMware Compatibility Guide. Maintain identical ESXi versions across all hosts. Ensure time synchronization (NTP) is properly set across all nodes. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:1:5","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"2. Configuring vDS and Network Design â”Œ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”” â”€ â”€ â”€ â”€ â”€ â”€ v v â”€ P V V v M S â”€ P V v v M S â”€ P V v v M S v â”€ â”€ m m â”€ o L M m T e â”€ o L M m T e â”€ o L M m T e S â”€ â”€ n n â”€ r A k k U r â”€ r A k k U r â”€ r A k k U r A â”€ â”€ i i â”€ t N e 0 : v â”€ t N e 1 : v â”€ t N e 1 : v N â”€ â”€ c c â”€ r i â”€ r i â”€ r i , â”€ â”€ E 0 1 â”€ G I n : 1 c â”€ G I n : 9 c â”€ G I n : 9 c â”€ â”€ S â”€ r D e 5 e â”€ r D e 0 e â”€ r D e 0 e v â”€ â”€ X â”€ o l 1 0 s â”€ o : l 1 0 s â”€ o : l 1 0 s S â”€ â”€ I â”€ u : 9 0 : â”€ u 9 0 : â”€ u 9 0 : A â”€ â”€ â”€ p P 2 â”€ p 2 P 2 â”€ p 3 P 2 N â”€ â”€ 1 U U â”€ : o . M â”€ : 0 o . v â”€ : 0 o . â”€ â”Œ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”” â”Œ â”‚ â–¼ â”€ p p â”€ r 1 a â”€ r 1 M â”€ r 1 W â”€ â”€ â”€ â”€ â”€ â”€ l l â”€ v 1 t 6 n â”€ v t 6 o â”€ v t 6 i â”€ â”€ â”€ N v v â”€ â”€ â”€ i i â”€ D 0 s 8 a â”€ D s 8 t â”€ D s 8 t â”€ â”€ â”€ a D D â”€ â”€ â”€ n n â”€ S . g â”€ S . i â”€ S . n â”€ â”€ â”€ m S S â”€ â”€ â”€ k k â”€ _ 1 e â”€ _ 2 o â”€ _ 3 e â”€ â”€ â”€ e _ _ â”€ â”€ â”€ â”€ M 0 m â”€ v 0 n â”€ v 0 s â”€ â”€ â”€ M W â”€ â”€ â”€ 1 2 â”€ G . e â”€ M . â”€ S . s â”€ â”€ â”€ G A â”€ â”€ â”€ â”€ M 1 n â”€ o 1 â”€ A 1 â”€ â”€ â”€ M N â”€ â”€ â”€ â”€ T 1 t â”€ t 1 â”€ N 1 â”€ â”€ â”€ T â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”Œ â”‚ â”‚ â”‚ â”” â”Œ â”‚ â”‚ â”‚ â”” â”€ â”€ â”€ â”€ â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”˜ â”€ â”€ â”€ â”€ â”€ â”€ â”€ V 1 1 â”€ â”€ â”€ ( â”€ â”€ â”€ U â”€ â”€ â”€ L 0 0 â”€ â”€ â”€ D â”€ â”€ â”€ p â”€ â”€ â”€ A 0 â”€ â”€ â”€ i â”€ â”€ â”€ l â”€ â”€ â”€ N â”€ â”€ â”€ s â”€ â”€ â”€ i â”€ â”‚ â–¼ â”€ â”€ â”€ â”€ â”€ t â”€ â”€ â”€ n â”€ â”€ P â”€ M 1 1 â”€ â”€ â”€ r â”€ â”€ â”€ k â”€ â”€ o â”€ T 5 5 â”€ â”€ â”€ v i M â”€ â”€ U â”€ â”€ â”€ r â”€ U 0 0 â”€ â”€ â”€ D b T â”€ â”€ p â”€ 1 â”€ â”€ t â”€ 0 0 â”€ â”€ [ â”€ S u U â”€ â”€ l â”€ â”€ â”€ â”€ â”€ â”€ . â”€ _ t : â”¬ â”‚ â–¼ â”€ i â” â”‚ â”€ â”€ G â”€ â”‚ â”‚ â”‚ â”‚ â”€ â”‚ â”¼ â”‚ â–¼ . â”€ M e â”€ â”€ n â”€ â”€ â”€ r â”€ â”€ â”€ . â”€ a d 9 â”€ â”€ k â”€ U â”€ â”€ o â”€ N v v v â”€ â”€ ] â”€ i 0 â”€ â”€ s â”€ p â”€ â”€ u â”€ a D D D â”€ â”€ â”€ n S 0 â”€ â”€ â”€ l â”€ â”€ p â”€ m S S S â”€ â”€ â”€ w 0 â”€ â”€ â”€ i â”€ â”€ s â”€ e _ _ _ â”€ â”€ â”€ i â”€ â”€ â”€ n â”€ â”€ â”€ v v L â”€ â”€ â”€ t â”€ â”€ â”€ k â”€ â”‚ â–¼ â”€ â”€ M S A â”€ â”€ â”€ c â”€ â”€ â”€ â”€ â”€ â”€ o A N â”€ â”€ â”€ h â”€ â”€ â”€ 2 â”€ â”€ â”€ t N â”€ â”€ â”€ ) â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ V 2 3 2 â”€ â”€ â”Œ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”” â” â”‚ â”‚ â”‚ â”˜ â” â”‚ â”‚ â”‚ â”˜ â”€ â”€ L 0 0 0 â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ A 0 â”€ â”€ â”€ v v â”€ P V v v M S â”€ P V v v M S â”€ P V v v M S v â”€ â”€ â”€ N â”€ â”€ â”€ m m â”€ o L M m T e â”€ o L M m T e â”€ o L M m T e S â”€ â”€ â”€ â”€ â”€ â”€ n n â”€ r A k k U r â”€ r A k k U r â”€ r A k k U r A â”€ â”€ â”€ M 9 9 1 â”€ â”€ â”€ i i â”€ t N e 1 : v â”€ t N e 1 : v â”€ t N e 1 : v N â”€ â”€ â”€ T 0 0 5 â”€ â”€ â”€ c c â”€ r i â”€ r i â”€ r i , â”€ â”€ â”€ U 0 0 0 â”€ â”€ â”€ E 0 1 â”€ G I n : 1 c â”€ G I n : 9 c â”€ G I n : 9 c â”€ â”€ â”€ 0 0 0 â”€ â”€ â”€ S â”€ r D e 5 e â”€ r D e 0 e â”€ r D e 0 e v â”€ â”€ â”€ â”€ â”€ â”€ X â”€ o : l 1 0 s â”€ o : l 1 0 s â”€ o : l 1 0 s S â”€ â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”˜ â” â”‚ â–¼ â”€ I â”€ u 9 0 : â”€ u 9 0 : â”€ u 9 0 : A â”€ â”€ â”€ p 1 P 2 â”€ p 2 P 2 â”€ p 3 P 2 N â”€ â”€ N U U â”€ : 0 o . M â”€ : 0 o . v â”€ : 0 o . â”€ â”€ p p â”€ r 1 a â”€ r 1 M â”€ r 1 W â”€ â”€ l l â”€ v t 6 n â”€ v t 6 o â”€ v t 6 i â”€ â”€ i i â”€ D s 8 a â”€ D s 8 t â”€ D s 8 t â”€ â”€ n n â”€ S . g â”€ S . i â”€ S . n â”€ â”€ k k â”€ _ 1 e â”€ _ 2 o â”€ _ 3 e â”€ â”€ â”€ M 0 m â”€ v 0 n â”€ v 0 s â”€ â”€ 1 2 â”€ G . e â”€ M . â”€ S . s â”€ â”€ â”€ M 1 n â”€ o 1 â”€ A 1 â”€ â”€ â”€ T N t â”€ t N â”€ N N â”€ â”€ â”€ â”€ â”€ â”€ â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”˜ A Distributed Switch (vDS) provides centralized management of networking across all ESXi hosts in your cluster. It enables consistent configuration of port groups, VMkernel adapters, and uplinks. This section walks you through the setup of a minimal but robust networking environment. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:2:0","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ¯ Recommended Network Design (Minimal Topology) For a basic production cluster with two ESXi hosts and one vCenter, the following roles should be isolated logically (or via VLANs): Traffic Type Interface Purpose Example VLAN Example IP Address Management vCenter \u0026 ESXi control VLAN 10 192.168.10.x vMotion Live VM migration VLAN 20 192.168.20.x vSAN Storage traffic VLAN 30 192.168.30.x VM Network (LAN) Internal services/apps VLAN 100 192.168.100.x VM Network (WAN) External/Internet-bound VLAN 200 192.168.200.x Each host should have at least 2 physical NICs. Use NIC teaming or dedicate one NIC per role (preferred for performance and fault tolerance). ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:2:1","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ›  Step-by-Step: Creating a vDS In the vSphere Web Client, right-click the Datacenter â†’ Distributed Switch â†’ New Distributed Switch. Set: Name: vDS_Main Version: Match your ESXi version (e.g., 8.0.0) Number of Uplinks: 2 (adjust if more NICs) Enable Network I/O Control Click Finish. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:2:2","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"â• Add Hosts to the vDS Select the newly created vDS_Main. Right-click â†’ Add and Manage Hosts â†’ Add Hosts. Select the ESXi hosts from your cluster. Map each uplink to a physical NIC on the host: Uplink1 â†’ vmnic0 Uplink2 â†’ vmnic1 ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:2:3","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸŒ Create Distributed Port Groups Each logical network gets its own port group. Name VLAN ID Description vDS_MGMT 10 Management / vCenter traffic vDS_VSAN 30 vSAN storage replication vDS_VMOT 20 vMotion traffic vDS_LAN 100 Internal VM traffic vDS_WAN 200 External traffic (if needed) Use descriptive names for each port group and match the correct VLAN ID based on your switch configuration. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:2:4","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ§  Configure VMkernel Adapters For each ESXi host: Go to Host â†’ Configure â†’ VMkernel Adapters â†’ Add VMkernel Adapter. Create one adapter per role: Port Group IP Address Services Enabled vDS_MGMT 192.168.10.11 âœ… Management vDS_VMOT 192.168.20.11 âœ… vMotion vDS_VSAN 192.168.30.11 âœ… vSAN Use separate subnets and gateways where required. The vSAN and vMotion interfaces typically have no default gateway. Repeat for other hosts with: .12 for Host 2 .13 for Host 3 (if any) ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:2:5","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ’¡ Best Practices Separate critical services (Management, vSAN, vMotion) into different VLANs or physical NICs. Use LACP or Active/Standby NIC teaming for redundancy. Enable Network I/O Control to prioritize traffic types. Always label your Port Groups clearly â€” consistent naming saves time during troubleshooting. For 3+ hosts, consider dedicating NICs solely for vSAN performance. Next up, weâ€™ll dive into setting up vSAN, including disk claiming, witness host deployment, and storage policy configuration. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:2:6","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"3. vSAN Setup and Configuration â”Œ â”‚ â”‚ â”‚ â”‚ â”” â”€ â”€ â”€ â”€ E â”€ L - â”€ â”€ S â”€ o â”€ â”€ X â”€ c S â”€ â”€ i â”€ a S â”€ â”€ â”€ l D â”€ â”Œ â”‚ â–¼ H â”€ â”¬ â”‚ â”” â”€ â”€ o â”€ D / â”€ â”€ â”€ â”€ s â”€ i â”€ â”€ â”€ â”€ t â”€ s H â”€ â”€ â”€ â”€ â”€ k D â”€ â”€ â”€ â”€ 1 â”€ s D â”€ â”€ â”€ â”€ A â”€ â”€ â”€ â”Œ â”‚ â”‚ â”” â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â” â”‚ â”‚ â”‚ â”‚ â”˜ â”€ â”€ ( â”€ â”€ â”Œ â”‚ â”‚ â”‚ â”‚ â”” â”€ â”€ F â”€ â”€ â”€ â”€ â”€ â”€ â”€ a â”€ â”€ â”€ E â”€ L - â”€ â”€ â”€ u â”€ â”€ â”€ S â”€ o â”€ â”€ â”€ l â”€ â”€ â”€ X â”€ c S â”€ â”€ â”€ S t â”€ â”€ â”€ i â”€ a S â”€ â”€ â”€ i â”€ â”€ â”€ â”€ l D â”€ â”€ â”Œ â”‚ â”” â”Œ â”‚ â–¼ t D â”¬ â”¼ â”‚ â–¼ H â”€ â”¬ â”” â”€ â”€ â”€ â”€ â”€ e o â”€ â”€ â”€ o â”€ D / â”€ â”€ â”€ â”€ V â”€ â”€ â”€ m â”€ â”€ â”€ s â”€ i â”€ â”€ â”€ â”€ M â”€ â”€ â”€ A a â”€ â”€ â”€ t â”€ s H â”€ â”€ â”€ â”€ â”€ â”€ â”€ i â”€ â”€ â”€ â”€ k D â”€ â”€ â”€ â”€ o â”€ â”€ â”€ n â”€ â”€ â”€ 2 â”€ s D â”€ â”€ â”€ â”€ n â”€ â”€ â”€ â”€ â”€ â”€ A â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ A â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ H â”€ S â”€ â”€ ) â”€ â”€ â” â”‚ â”‚ â”‚ â”‚ â”˜ â”€ â”€ â”Œ â”‚ â”‚ â”” â”€ o â”€ t â”€ â”€ â”€ â”€ â”Œ â”‚ â”‚ â”‚ â”‚ â”” â”€ â”€ â”€ â”€ â”€ s â”€ ( r â”€ â” â”‚ â”‚ â”˜ â”€ â”€ â”€ â”€ â”€ â” â–¼ â”€ â”€ t â”€ V e â”Œ â”‚ â”‚ â”¼ â”” â”€ â”€ E â”€ L - â”€ â”€ â”€ â”€ â”€ â”€ i t â”€ â”€ â”€ â”€ S â”€ o â”€ â”€ â”€ â”€ â”€ 1 â”€ r c â”€ W â”€ â”€ â”€ X â”€ c S â”€ â” â”‚ â–¼ â”€ â”€ â”€ t h â”€ i â”€ â”€ â”€ i â”€ a S â”€ â”€ â”€ â” â”¼ â”˜ u e â”€ t â”€ â”€ â”€ â”€ l D â”€ â”€ â”€ â”€ a d â”€ n â”€ â” â”‚ â–¼ H â”€ â”¬ â”‚ â”‚ â–¼ f â”€ â”€ l â”€ W e â”€ R B â”€ o â”€ D / â”€ â”€ o â”€ â”€ C â”€ i s â”€ A e â”€ s â”€ i â”€ â”€ r â”€ â”€ S l â”€ t s ( â”€ I t â”€ t â”€ s H â”€ â”€ â”€ â”€ V t u â”€ n q â”€ D w â”€ â”€ k D â”€ â”€ v a â”€ â”€ M o s â”€ e h u â”€ - e â”€ 3 â”€ s D â”€ â”€ S l â–² â”‚ â”˜ w r t â”€ s o o â”€ 1 e â”€ A â”€ â”€ â”€ A l â”€ a a e â”€ s l r â”€ n â”€ â”€ â”€ â”€ N â”€ r g r â”€ d u â”€ R â” â”‚ â”‚ â”‚ â”‚ â”˜ â”€ V â”€ [ e e â”€ A s m â”€ e S â”€ D M â”€ . a â”€ p â”€ p i â”€ a s â–² â”‚ â”‚ . v A n â”€ p m â”€ l t â”Œ â”‚ â”‚ â”‚ â”‚ â”” â”€ t â”€ . S r d â”€ l e o â”€ i e â”€ â”€ â”€ â”€ a i â”€ ] A e â”€ i t t â”€ c s â”€ E â”€ L - â”€ â”€ s n â”€ N a F â”€ a a e â”€ a â”€ S â”€ o â”€ â”€ t â”€ a â”€ n d ) â”€ t A â”€ X â”€ c S â”€ â”€ o c â–² â”‚ â”” N u â”€ c a â”€ i â”€ i â”€ a S â”€ â”€ r l â”€ â”€ e l â”€ e t â”€ B â”€ â”€ l D â”€ â”€ e u â”€ â”€ t t â”€ a â”€ n â”Œ â”‚ â–¼ H â”€ â”¬ â”‚ â”‚ â–¼ s â”€ â”€ w â”€ â”€ â”€ â”€ o â”€ D / â”€ â”€ t â”€ â”€ o D â”€ o â”€ â”€ â”€ s â”€ i â”€ â”€ e â”€ â”€ r o â”€ n â”€ â”€ â”€ t â”€ s H â”€ â”Œ â”‚ â–¼ r â”€ â”€ k m â”€ l â”€ â”€ â”€ â”€ k D â”€ â”€ â”€ â”€ â”€ ) a â”€ y â”€ â”€ â”€ 1 â”€ s D â”€ â”€ â”€ â”€ â”Œ â”¼ â”” i â” â”‚ â”‚ â”¼ â”˜ â”€ â”€ B â”€ â”€ â”€ â”Œ â–¼ â”€ â”€ â”€ n â”€ â”Œ â”‚ â”‚ â”” â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ V â”€ s â”€ â”€ â”€ â”€ â” â”‚ â”‚ â”‚ â”‚ â”˜ â”€ â”€ â” â”‚ â”‚ â”˜ â”€ M â”€ â”€ â”€ ( â”€ â”€ â”Œ â”‚ â”‚ â”‚ â”‚ â”” â”€ â”€ â”€ â”€ â”€ â”€ F â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ o â”€ â”€ â”€ a â”€ â”€ â”€ E â”€ L - â”€ â”€ â”€ â”€ n â”€ â”€ â”€ u â”€ â”€ â”€ S â”€ o â”€ â”€ â”€ â”€ â”€ â”€ â”€ l â”€ â”€ â”€ X â”€ c S â”€ â”€ â”€ â”€ H â”€ â”€ â”€ S t â”€ â”€ â”€ i â”€ a S â”€ â”€ â”€ â”€ o â”€ â”€ â”€ i â”€ â”€ â”€ â”€ l D â”€ â”€ â”€ â”€ s â”€ â” â”‚ â–¼ t D â”¬ â”¼ â”‚ â–¼ H â”€ â”¬ â”˜ â”€ â”€ t â”€ â”€ e o â”€ â”€ â”€ o â”€ D / â”€ â”€ â”€ â”€ â”€ m â”€ â”€ â”€ s â”€ i â”€ â”€ â”€ N â”€ â”€ B a â”€ â”€ â”€ t â”€ s H â”€ â”€ â”€ â”€ â”€ i â”€ â”€ â”€ â”€ k D â”€ â”€ â” â”‚ â”˜ â”€ n â”€ â”€ â”€ 2 â”€ s D â”€ â”€ â”€ â”€ â”€ â”€ B â”€ â”€ â”€ â”€ B â”€ â”€ â”€ â”€ â”€ â”€ â”€ ) â”€ â”€ â” â”‚ â”‚ â”‚ â”‚ â”˜ â”€ â”€ â”€ â”€ â”Œ â”‚ â”‚ â”‚ â”‚ â”” â”€ â” â”‚ â”‚ â”˜ â”€ â”€ â”€ â”€ â”€ â”€ â”€ E â”€ L - â”€ â”€ â”€ â”€ S â”€ o â”€ â”€ â”€ â”€ X â”€ c S â”€ â”€ â”€ â”€ i â”€ a S â”€ â”€ â”€ â”€ â”€ l D â”€ â”€ â” â”‚ â–¼ H â”€ â”¬ â”‚ â”˜ â”€ o â”€ D / â”€ â”€ s â”€ i â”€ â”€ t â”€ s H â”€ â”€ â”€ k D â”€ â”€ 3 â”€ s D â”€ â”€ B â”€ â”€ â”€ â”€ â”€ â” â”‚ â”‚ â”‚ â”‚ â”˜ VMware vSAN pools local disks from each ESXi host to create a resilient, shared datastore â€” enabling a hyperconverged infrastructure. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:0","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ” vSAN Architecture: ESA vs OSA â”Œ â”‚ â”” â”Œ â”‚ â”” â”Œ â”‚ â”‚ â”‚ â”‚ â”‚ â”” â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ ( â”€ D â”€ â”€ C â”€ â”€ C â”€ â”€ C â”€ O â”€ i â”€ â”€ a â”€ â”€ a â”€ â”€ a â”€ r â”€ s â”€ â”€ c â”€ H â”€ p â”€ â”€ p â”€ i â”€ k â”€ â”€ h â”€ D â”€ a â”€ â”€ a â”€ g â”€ â”€ â”€ e â”€ D â”€ c â”€ [ â”€ c â”€ i â”Œ â–¼ â”€ G â”¬ â–¼ â”€ â”¬ â–¼ / â”€ i â”€ . â”€ i â”€ n â”€ â”€ r â”€ â”€ T â”€ S â”€ t â”€ . â”€ t â”€ a â”€ â”€ o â”€ â”€ i â”€ D â”€ y â”€ . â”€ y â”€ l â”Œ â”‚ â”” â”€ â”€ u â”€ â”€ e â”€ D â”€ â”€ ] â”€ â”€ â”€ â”€ â”€ â”€ p â”€ â”€ r â”€ â”€ D â”€ â”€ D â”€ S â”€ â”€ â”€ â”€ 1 â”€ â”€ â”€ â”€ i â”€ â”€ i â”€ t â”€ E â”€ â”€ â” â”‚ â”˜ â” â”‚ â”˜ â”€ s â”€ â”€ s â”€ V o â”€ S â”€ â”€ S \u003c â”€ k â”€ â”€ k â”€ S r â”€ X â”€ â”€ [ S - â”€ 1 â”€ â”€ N â”€ A a â”€ i â”€ â”€ . D â”€ â”€ â”€ â”€ N g â”€ â”¬ â”¼ â–¼ . / 1 â” â”‚ â”‚ â”‚ â”‚ â”‚ â”˜ e â”€ H â”€ â”€ . N x â”Œ â”‚ â”‚ â”‚ â”‚ â”‚ â”” O â”€ o â”€ â”€ ] V â”€ â”€ â”€ â”€ S A â”€ s â”€ â”€ M â”€ C â”€ â”€ C â”€ A r â”€ t â”€ â”€ â”Œ â”‚ â”” e \u003e â”€ a â”€ â”€ a â”€ c â”€ â”€ â”€ â”€ â”€ â”Œ â”‚ â”” â”€ p â”€ â”€ p â”€ h â”€ â”€ â”€ â”€ D â”€ â”€ â”€ â”€ a â”€ â”€ a â”€ i â” â”‚ â”˜ â”€ â”€ i â”€ â”€ C â”€ â”€ c â”€ â”€ c â”€ t â”€ â”€ s â”€ â”€ a â”€ H â”€ i â”€ [ â”€ i â”€ e â”€ â”€ c â”€ â”€ c â”€ D â”€ t â”€ . â”€ t â”€ c â”€ â”€ â”€ â”€ h â”€ D â”€ y â”€ . â”€ y â”€ t â” â–¼ â”€ G â”¬ â–¼ â”€ e â”¬ â–¼ / â”€ â”€ . â”€ â”€ u â”€ r â”€ â”€ â”€ S â”€ D â”€ ] â”€ D â”€ r â”€ o â”€ â”€ T â”€ D â”€ i â”€ â”€ i â”€ e â”€ u â”€ â”€ i â”€ D â”€ s â”€ â”€ s â”€ ) â”€ p â”€ â”€ e â”€ â”€ k â”€ â”€ k â”€ â”€ N â”€ â”€ r â”€ â”€ 1 â”€ â”€ N â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â” â”‚ â”˜ â” â”‚ â”˜ â” â”‚ â”‚ â”‚ â”‚ â”‚ â”˜ ( E x p r e s s â”Œ â”‚ â”” â”Œ â”‚ â”‚ â”” â”€ â”€ â”€ â”€ V S â”€ â”€ â”€ A S â”€ S t â”€ E â”€ â”€ l t â”€ A o â”€ S â”€ â”€ l o â”€ N r â”€ X â”€ â”€ - r â”€ a â”€ I â”€ â”€ F a â”€ E g â”€ â”¬ â–¼ â”€ l g â”€ S e â”€ H â”€ â”€ a e â”€ A â”€ o â”€ â”€ s â”€ A â”€ s â”€ â”€ h P â”€ r â”€ t â”€ â”€ o â”€ c â”€ â”€ â”€ o â”€ h â”€ â”€ â”€ l â”€ i â” â”‚ â”˜ â” â”‚ â”‚ â”˜ t e c t u r e ) Feature OSA (Original Storage Arch.) ESA (Express Storage Arch.) Introduced in vSAN 5.5 vSAN 8.0 Cache/Capacity Separation Required Not required Performance Optimization Manual Built-in, adaptive Disk Requirements SSD + HDD All NVMe/SSD only Licensing Enterprise Plus Enterprise Plus (w/ ESA support) Recommendation: If youâ€™re using modern NVMe disks and vSAN 8+, choose ESA for simplicity and better performance. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:1","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ“¦ Hardware Requirements Minimum: 3 ESXi hosts, or 2 hosts + 1 Witness Each host must have: At least 1 SSD/NVMe for cache (OSA) At least 1 HDD or SSD for capacity All hosts must have same ESXi version RAID controllers in passthrough or RAID0 mode (JBOD) Consistent network config and IP ranges ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:2","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ›  Step-by-Step: Enable vSAN Go to Cluster â†’ Configure â†’ vSAN â†’ Services Click Configure Choose vSAN Type: vSAN HCI â€“ Most common vSAN Max â€“ Disaggregated storage pool Cluster topology: âœ… Two node cluster â€“ for edge or small sites âœ… Single site cluster â€“ standard 3+ host deployment Choose architecture: âœ… vSAN ESA (if supported) or âŒ OSA (legacy method) ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:3","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"âš™ï¸ Feature Configuration Option Recommendation Compression âœ… Enabled (ESA only) Deduplication âŒ Optional (OSA only) Encryption at Rest âŒ Optional Encryption in Transit âœ… (default from vSAN 7 U1) Allow reduced redundancy âœ… Useful for maintenance mode RDMA support âŒ Unless special HW used ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:4","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸŒ Fault Domains \u0026 Stretched Cluster Configuration vSAN allows for advanced availability setups using Fault Domains and Stretched Clusters. These features ensure data resilience even during site or rack-level failures. ğŸ§± Fault Domains (FDs) Used to group ESXi hosts that might fail together, such as those in the same rack, power domain, or chassis. Ensures that vSAN places replica components across different FDs, not just different hosts. Configure FDs under Cluster â†’ Configure â†’ vSAN â†’ Fault Domains. Use Case Benefit Hosts in same rack Protect against rack-level failure Edge deployments Use 2-node with Witness as 3rd FD Larger clusters (6+ hosts) Improve replica distribution ğŸ’¡ At least 3 Fault Domains are required for RAID-1 with full availability. ğŸŒ Stretched Cluster A special vSAN topology designed for geographically separated sites. Consists of: 2 Active Fault Domains (Site A and Site B) 1 Witness Appliance (remote, vote-only, no data) Component Role Site A Half of data \u0026 compute Site B Other half of data \u0026 compute Witness Maintains quorum vSAN automatically replicates VM data between sites (RAID-1) and uses the Witness to avoid split-brain scenarios. ğŸ“ Witness must be outside the two sites, reachable by both. ğŸ§ª Stretched Cluster Example: RAID-1 or RAID-5 You can choose storage policies per VM: Policy Type Description RAID-1 (Mirroring) Best for performance, uses more space RAID-5 (Erasure Code) Space-efficient, needs 4+ data hosts RAID-1 across sites ensures 1:1 mirroring RAID-5 is intra-site only, used within each fault domain âœ… Best Practices Ensure low latency (â‰¤ 5ms RTT) between active sites. Use dedicated VMkernel interfaces for vSAN on separate VLANs. Witness traffic should be isolated if possible. Monitor vSAN â†’ Health â†’ Stretched Cluster regularly. Use Stretched Cluster only when geographic redundancy is required â€” otherwise, configure simple Fault Domains. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:5","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ’¾ Disk Claiming vCenter will automatically detect eligible disks. Tier Device Type Example Size Notes Cache Tier SSD / NVMe 250 GB+ Only in OSA mode Capacity HDD / SSD 500 GB+ All disks in ESA Assign disks to appropriate tiers. Confirm all hosts contribute capacity to the cluster. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:6","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ§ª Example: 2-node + Witness Topology 1 1 9 9 2 2 E . . S 1 1 X 6 6 I 8 8 . . 1 1 3 0 0 . . 1 1 1 1 W 1 i 9 t 2 n . e 1 v s 6 S s 8 A . N A 1 p 0 L p . i l 1 n i 0 k a 0 s n c e 1 1 9 9 2 2 . . E 1 1 S 6 6 X 8 8 I . . 1 3 2 0 0 . . 1 1 2 2 Node Management IP vSAN IP Role ESXI 1 192.168.10.11 192.168.30.11 Data + Compute ESXI 2 192.168.10.12 192.168.30.12 Data + Compute Witness VM 192.168.10.100 192.168.30.100 Voting only node ğŸ“ Witness Appliance is a lightweight virtual machine. Deploy it using OVF template and place it outside the vSAN cluster. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:7","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ§° Create vSAN Storage Policy Go to Policies and Profiles â†’ VM Storage Policies Create a new policy: vSAN-Standard Configure: Name: vSAN-Standard vSAN rules: - Availability: \"2 failures â€“ RAID-1 (Mirroring)\" - Object space reservation: Thin provisioning - Flash read cache: 0% - Force provisioning: Yes You can also create â€œNo Redundancyâ€ policies for single-host test environments. ğŸ Result: Shared Resilient Datastore After completing the wizard: A new vSAN Datastore appears under Datastores All eligible VMs can now be placed on vSAN Storage policies can be assigned during VM deployment or migration ğŸ’¡ Best Practices Use separate VMkernel interfaces for vSAN traffic (VLAN + no gateway). Ensure jumbo frames are enabled (MTU 9000) if network supports it. Avoid mixing disk types or vendors within a cluster. Monitor health under vSAN â†’ Health Enable troubleshooting logging if issues arise ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:8","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"4. Configuring High Availability (HA) I A n f i E t E d t S V e S o i X M r X w a I 1 I n l H 1 o 1 S s t t a t A e : f a i l V s M : 1 E E S i S V X d X M I l I 1 e 2 2 vSphere High Availability (HA) protects your virtual machines by restarting them on another ESXi host in the cluster if a failure occurs. HA is a critical feature in production environments to minimize downtime. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:0","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ¯ What Does HA Protect Against? Failure Type HA Protection Explanation ESXi Host Failure âœ… Yes VM restarts on surviving host VM Crash âŒ No Requires VMware FT or 3rd-party monitoring Storage Failure âš ï¸ Limited Depends on vSAN resilience Network Partition âœ… Yes Uses Datastore or vSAN heartbeat ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:1","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ›  Step-by-Step: Enabling HA Go to your cluster â†’ Configure â†’ vSphere Availability. Click Edit. Enable: âœ… Turn on vSphere HA (Optional) Enable Admission Control Under â€œFailure conditions and responsesâ€: Host Failure Response: Restart VMs Isolation Response: Power off and restart VMs Click OK to apply. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:2","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ§  Admission Control Explained Admission Control ensures that the cluster reserves enough resources to restart VMs if a host fails. Policy Type Description Slot Policy Based on largest CPU/memory reservation Cluster Resource Percentage Recomm. â€“ reserve e.g., 33% CPU \u0026 memory Dedicated Failover Hosts Explicitly reserve 1 or more hosts Recommendation: Use Percentage-Based policy for flexibility and better resource utilization. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:3","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"âš™ï¸ Advanced HA Options Heartbeat Datastores: Used to confirm host is alive during network isolation. Enabled automatically with vSAN. VM Monitoring: Restarts VMs if VMware Tools stops responding. Good for application crash recovery. Enable this under: Cluster â†’ Configure â†’ vSphere Availability â†’ VM Monitoring Proactive HA (requires vendor plugin): Migrates VMs off hosts reporting hardware degradation (e.g., failed DIMMs, overheating) ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:4","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ›¡ Recommended Settings Setting Value Host Monitoring âœ… Enabled VM Monitoring âœ… Enabled (medium sensitivity) Isolation Response Power off and restart VMs Datastore Heartbeating âœ… Use multiple datastores Admission Control Policy 33% reserved resources ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:5","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ” Example Scenario You have a 3-node vSAN cluster: 1 host fails â†’ HA restarts VMs from that host on remaining 2 If Admission Control is enabled, only a safe number of VMs are allowed to power on initially to guarantee restart in case of failure ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:6","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ’¡ Best Practices Always test HA by performing a host shutdown (not reboot). Monitor HA events in Events or Tasks tabs. Donâ€™t disable Host Monitoring unless absolutely required (e.g., during firmware upgrades). Combine with DRS to ensure intelligent VM placement post-restart. In the next section, we will explore Distributed Resource Scheduler (DRS) â€” VMwareâ€™s intelligent load balancer for VM workloads. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:7","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"5. Configuring DRS (Distributed Resource Scheduler) B A e f f E L V V t E L V o S O M M e S O M r X A 1 2 r X A 1 e I D I D D D 1 9 R 1 6 R 0 S 0 S % % : M i g r a V t M i 2 o n : E L E L V S O S O M X A X A 2 I D I D 2 1 2 4 0 0 % % E L V E L V S O M S O M X A 3 X A 3 I D I D 3 4 3 4 5 5 % % VMware Distributed Resource Scheduler (DRS) is responsible for automatically balancing compute workloads (CPU and memory) across hosts in a cluster. It helps optimize performance and resource utilization with minimal manual intervention. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:0","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ¯ What DRS Does Monitors resource usage (CPU, RAM) across ESXi hosts Live migrates VMs (via vMotion) to balance loads Prioritizes critical workloads and improves availability DRS works only if vMotion is properly configured between hosts and there is shared storage (like vSAN or NFS). ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:1","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ›  Step-by-Step: Enabling DRS Go to your cluster â†’ Configure â†’ vSphere DRS. Click Edit. Enable: âœ… Turn on vSphere DRS Set Automation Level: ğŸ”˜ Fully Automated (recommended) â­• Partially Automated (for initial placement only) â­• Manual (you approve every migration) Optionally set Migration Threshold: From Conservative (fewer moves) â†’ Aggressive (more frequent balancing) Click OK. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:2","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ§ª Example Scenario ğŸ›  Example Scenario (Why Partially Automated is Safer) You have 3 hosts: Host01: Heavy load (90% CPU) Host02 / Host03: Idle or lightly loaded In Fully Automated mode: â†’ DRS might vMotion critical database VMs without your knowledge. In Partially Automated mode: â†’ DRS still recommends rebalancing, but you decide when and what to move. This is essential in environments where: Apps are sensitive to vMotion timing, Licensing or performance isolation matters, You need predictability during peak hours. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:3","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"âš™ï¸ Advanced DRS Options Feature Description VM/Host Affinity Rules Keep VMs together or apart (e.g., DB + App tiers) Host Groups Define sets of hosts for special placement DRS Score (vSphere 7+) Shows VM happiness based on resource availability DRS for Maintenance Mode Automatically migrates VMs off host Predictive DRS (via vROps) Uses analytics to anticipate load ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:4","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"âš–ï¸ Automation Level Explained Mode Behavior Use Case Manual Shows recommendations only Training/testing environments Partially Auto âœ… Automatic initial placement ğŸ”’ Conservative or regulated operations ğŸ” Manual approval for migrations ğŸ›  Controlled production environments Fully Automated Initial + ongoing migrations Lab/testing or low-risk workloads ğŸ›¡ï¸ Recommended Mode: Partially Automated is recommended in most production environments. It provides automation without losing control, ensuring performance without risking unexpected migrations. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:5","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ›¡ Recommended Settings Setting Value DRS Mode âœ… Partially Auto Migration Threshold Level 3 or 4 (Balanced) Affinity Rules Define as needed Host Groups Use for licensing or zones Predictive DRS Optional (requires vROps) ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:6","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"ğŸ’¡ Best Practices Combine DRS with HA for maximum resiliency. Monitor DRS recommendations under Cluster â†’ Monitor â†’ DRS. Regularly review affinity/anti-affinity rules. For multi-tier apps (e.g., Web + DB), use anti-affinity to separate roles. Enable EVC for mixed CPU environments to ensure vMotion compatibility. With HA and DRS properly configured, your cluster can now balance workloads and survive hardware failures â€” fully automated, fully redundant. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:7","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"âœ… Summary of Cluster Setup Feature Purpose Configured in Section Cluster Aggregates hosts \u0026 enables features 1 vDS Centralized network configuration 2 vSAN Shared hyperconverged storage 3 HA VM restart on host failure 4 DRS Load balancing via vMotion 5 ğŸ§© This completes your production-ready VMware cluster setup. If youâ€™d like to export a full configuration checklist or Markdown version for documentation or GitHub repo, let me know! ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:8","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":["networking"],"content":"ğŸš€ Teleport is a modern open-source platform for secure access to your infrastructure: SSH, Kubernetes, databases, web apps, and even Windows desktops (RDP). ","date":"2025-05-29","objectID":"/posts/teleport/:0:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"Teleport Setup open-source ZTNA Platform âœ… Requirements A Linux server with a public IP address and DNS name (e.g., teleport.\u003cyour-domain\u003e) One or more Windows and Linux machines Basic terminal access (Linux + Windows) ","date":"2025-05-29","objectID":"/posts/teleport/:1:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"ğŸ“Œ Step 1: Configure DNS Create the following A records for your domain: `teleport.\u003cyour-domain\u003e` â†’ your Linux server public IP *.`teleport.\u003cyour-domain\u003e` â†’ your Linux server public IP This is required for Letâ€™s Encrypt (ACME) to issue a valid TLS certificate. ","date":"2025-05-29","objectID":"/posts/teleport/:1:1","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"ğŸ“¥ Step 2: Install Teleport on Linux Install the latest stable version of Teleport: curl https://cdn.teleport.dev/install.sh | bash -s 17.4.8 ","date":"2025-05-29","objectID":"/posts/teleport/:1:2","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"âš™ï¸ Step 3: Generate Teleport Configuration sudo teleport configure -o file --acme --acme-email=`teleport@yourdomain.com` --cluster-name=`teleport.\u003cyour-domain\u003e` This creates /etc/teleport.yaml with TLS auto-renewal using Letâ€™s Encrypt. My working configuration version: v3 teleport: nodename: teleport.\u003cyour-domain\u003e data_dir: /var/lib/teleport log: output: stderr severity: INFO format: output: text auth_service: enabled: true listen_addr: 0.0.0.0:3025 cluster_name: teleport.\u003cyour-domain\u003e proxy_listener_mode: multiplex proxy_service: enabled: true web_listen_addr: 0.0.0.0:443 public_addr: teleport.\u003cyour-domain\u003e:443 acme: enabled: true email: teleport@\u003cyour-domain\u003e windows_desktop_service: enabled: \"no\" ssh_service: enabled: \"no\" ","date":"2025-05-29","objectID":"/posts/teleport/:1:3","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"â–¶ï¸ Step 4: Start Teleport sudo systemctl enable teleport sudo systemctl start teleport Then open your browser and visit: https://teleport.\u003cyour-domain\u003e:443 ","date":"2025-05-29","objectID":"/posts/teleport/:1:4","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"ğŸ‘¤ Step 5: Create a Teleport Admin User sudo tctl users add teleport-admin --roles=editor,access --logins=root,ubuntu Teleport will print an invite link like: https://teleport.\u003cyour-domain\u003e:443/web/invite/abc123... Open the link to set a password and register your MFA device. ","date":"2025-05-29","objectID":"/posts/teleport/:1:5","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"ğŸ” Configure Windows RDP Access ","date":"2025-05-29","objectID":"/posts/teleport/:2:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"ğŸªŸ Step 1: Prepare Windows for RDP On your Windows machine, open Command Prompt (cmd.exe) as Administrator and dowload: curl.exe -fo teleport.cer https://teleport.\u003cyour-domain\u003e/webapi/auth/export?type=windows curl.exe -fo teleport-windows-auth-setup-v17.4.8-amd64.exe https://cdn.teleport.dev/teleport-windows-auth-setup-v17.4.8-amd64.exe Double-click the .exe installer to run the Teleport Windows Auth Setup program. Choose certificat Restart the computer after installation. ","date":"2025-05-29","objectID":"/posts/teleport/:2:1","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"ğŸ” Step 2: Generate Join Token for RDP on Linux Server SSH into your Teleport Auth Server and run: tctl tokens add --type=windowsdesktop Copy the token output to your RDP proxy server, e.g., /tmp/token ","date":"2025-05-29","objectID":"/posts/teleport/:2:2","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"âš™ï¸ Step 2: Configure windows_desktop_service on RDP Proxy Update or create the relevant section in /etc/teleport.yaml: windows_desktop_service: enabled: \"yes\" static_hosts: - name: Windows ad: false addr: 192.168.1.10:3389 labels: server: home host: Win10 Then restart the service: sudo systemctl restart teleport ","date":"2025-05-29","objectID":"/posts/teleport/:2:3","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"ğŸŒ Configure Internal Web Application Access ","date":"2025-05-29","objectID":"/posts/teleport/:3:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"ğŸ” Step 1: Generate Join Token for App Service Run on the Auth server: tctl tokens add --type=app Copy the token to the target server that will proxy your internal app. ","date":"2025-05-29","objectID":"/posts/teleport/:3:1","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"âš™ï¸ Step 2: Configure app_service in teleport.yaml Edit /etc/teleport.yaml on the node that will serve the app: app_service: enabled: \"yes\" apps: - name: opnsense uri: \"https://192.168.1.1:8080\" public_addr: \"opnsense.teleport.\u003cyour-domain\u003e.com\" insecure_skip_verify: true labels: env: net host: OPNsense Restart teleport sudo systemctl restart teleport ","date":"2025-05-29","objectID":"/posts/teleport/:3:2","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"ğŸ” Troubleshooting ACME TLS fails? Ensure port 80 and 443 are open Check DNS records Windows host not visible? Check RDP is enabled on the Windows machine Check firewall rules Web UI unreachable? Check teleport.yaml Check logs: journalctl -u teleport or docker logs teleport ğŸ’¡ Need a Docker setup? Want to automate the RDP proxy deployment? Check out my GitHub repo or contact me directly. ","date":"2025-05-29","objectID":"/posts/teleport/:4:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":null,"content":"Vitalii Stepchuk IT Spezialist ğŸ“ Unterer Stadtgraben 5, 8730 Uznach ğŸ“ +41 79 615 42 18 âœ‰ï¸ v.stepchuk@topli.ch ğŸ—“ï¸ Geboren am 01.11.1984 ğŸ‡ºğŸ‡¦ NationalitÃ¤t: Ukraine, Aufenthaltsbewilligung â€œSâ€ ğŸš— FÃ¼hrerausweis: Kat. B ","date":"2025-05-29","objectID":"/cv/:0:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"ğŸ—£ï¸ Sprachkenntnisse Ukrainisch: Muttersprache Russisch: Muttersprachliches Niveau Deutsch: Gute Kenntnisse Englisch: Gute Kenntnisse ","date":"2025-05-29","objectID":"/cv/:1:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"ğŸ’» IT-Kenntnisse Betriebssysteme: Linux, macOS, Windows Netzwerke: Switches, Firewalls, WLAN Virtualisierung: VMware, Hyper-V, Docker Scripting: Bash, PowerShell, Python VoIP: 3CX, Asterisk Ãœberwachung: Zabbix, Icinga Backup: VEEAM, Acronis Hardware: Server, PC, Laptops ","date":"2025-05-29","objectID":"/cv/:2:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"ğŸ§‘â€ğŸ’» Berufserfahrung ","date":"2025-05-29","objectID":"/cv/:3:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"System Ingenieur Praktikum â€“ SIDMAR AG Mai â€“ Dez. 2024 | MÃ¶nchaltorf, Schweiz Windows und Linux Themen: RDS-Umgebungen, System- und Sicherheitsmanagement, Log Managment, HA und Load Balancing, ADFS, VM, VPN-Server, Acronis Backup, Zabbix, Icinga, 3CX ","date":"2025-05-29","objectID":"/cv/:3:1","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"IT-Direktor â€“ Contact Center Alfa 2017 â€“ 2022 | Kiew, Ukraine Entwicklung und Bereitstellung der Serverinfrastruktur und des Netzwerks des Unternehmens. Implementierung und Wartung von Telefonie-, Ãœberwachungs-, Backup-, Stromversorgungs- und Sicherheitssystemen. ","date":"2025-05-29","objectID":"/cv/:3:2","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"Projektleiter â€“ Miner.bz (Einzelunternehmen) 2016 â€“ 2022 | Kiew, Ukraine Entwurf, Aufbau und Wartung eines Datenzentrums fÃ¼r das Mining Erstellung und Konfiguration von Spezialcomputern fÃ¼r das Mining ","date":"2025-05-29","objectID":"/cv/:3:3","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"Projektleiter â€“ Posolskyi (Einzelunternehmen) 2015 â€“ 2016 | Kiew, Ukraine Entwurf und Implementierung von Videogegensprechanlagen und VideoÃ¼berwachungssystemen auf Basis eines IP-Netzwerks fÃ¼r einen Wohnkomplex mit 120 Wohnungen. ","date":"2025-05-29","objectID":"/cv/:3:4","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"Systemadministrator â€“ Infolife 2009 â€“ 2015 | Kiew, Ukraine IT-Administrator des Unternehmens Einrichtung und Wartung des Netzwerks zwischen den BÃ¼ros des Unternehmens sowie des auf GSM-Gateways basierenden Telefonsystems und Akquisition des Hardware Equipments ","date":"2025-05-29","objectID":"/cv/:3:5","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"IT Specialist â€“ Topas 2003 â€“ 2009 | Kiew, Ukraine Sales Manager Revisionen von Computer Zusammenbau, PrÃ¼fung und Installieren eines Betriebssystems mit Anwendungen auf Computern ","date":"2025-05-29","objectID":"/cv/:3:6","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"ğŸ“ Ausbildung Ingenieur fÃ¼r Elektronik Nationale Technische UniversitÃ¤t der Ukraine â€œKyiv Polytechnic Instituteâ€ 2001 â€“ 2008 | Kiew, Ukraine ","date":"2025-05-29","objectID":"/cv/:4:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"ğŸ¤ Freiwilliges Engagement IT-Support fÃ¼r Privatpersonen in der Schweiz ","date":"2025-05-29","objectID":"/cv/:5:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"ğŸ”ï¸ PersÃ¶nliche Interessen Skifahren | Reisen | Fischen ","date":"2025-05-29","objectID":"/cv/:6:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":["linux"],"content":"ğŸ” Setting Up SSH Keys on Linux (Step-by-Step Guide) Using SSH keys is a safer and easier way to connect to Linux servers â€” no more typing your password every time. This guide will help you set up SSH keys, copy them to a remote server, and log in securely. ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:0:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"âœ… Step 1: Check If You Already Have SSH Keys Open your terminal and run: ls ~/.ssh/id_*.pub If you see a file like id_ed25519.pub or id_rsa.pub, it means you already have a key. You can use that one or create a new one. ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:1:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"ğŸ›  Step 2: Create a New SSH Key Pair To make a new SSH key, run: ssh-keygen -t ed25519 -C \"your_email@example.com\" On older systems, use ssh-keygen -t rsa -b 4096 instead. Press Enter to accept the default location (~/.ssh/id_ed25519) You can choose to add a passphrase (or leave it empty) This creates two files: id_ed25519 â†’ your private key (keep it secret!) id_ed25519.pub â†’ your public key (youâ€™ll share this) ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:2:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"ğŸ“¤ Step 3: Add Your Public Key to the Remote Server ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:3:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"Option 1: Use ssh-copy-id (recommended) ssh-copy-id username@remote_server_ip Add Your Public Key to the Remote ESXI Server cat ~/.ssh/id_rsa.pub | ssh root@ESXI_IP 'cat \u003e\u003e /etc/ssh/keys-root/authorized_keys' This command adds your key to the remote server so you can log in without a password. ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:3:1","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"Option 2: Manual method Show your public key: cat ~/.ssh/id_ed25519.pub Copy the whole line Connect to your server and paste it into: nano ~/.ssh/authorized_keys ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:3:2","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"ğŸš€ Step 4: Log In Without a Password Now try logging in: ssh username@remote_server_ip If everything is correct, youâ€™ll connect without entering a password ğŸ‰ ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:4:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"ğŸ”’ Step 5 (Optional): Turn Off Password Login This step is for extra security. Only do it if SSH keys are working! Open SSH settings on the server: sudo nano /etc/ssh/sshd_config Find and change these lines: PasswordAuthentication no ChallengeResponseAuthentication no UsePAM no Save and restart SSH: sudo systemctl restart sshd ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:5:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"ğŸ’¡ Helpful Tips Your private key must stay private (~/.ssh/id_ed25519) A passphrase adds extra protection Use an SSH config file to manage many servers: Create or edit this file: nano ~/.ssh/config Add this block: Host myserver HostName 192.168.1.10 User vitalii IdentityFile ~/.ssh/id_ed25519 Then you can connect by simply running: ssh myserver ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:6:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"ğŸ§© Summary SSH keys help you: Log in faster Avoid typing passwords Stay secure Now youâ€™re ready to manage your servers like a pro â€” safely and efficiently! ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:7:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["networking"],"content":"OPNsense is a powerful open-source firewall and routing platform based on FreeBSD. ","date":"2025-05-26","objectID":"/posts/opnsense/:0:0","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"1.1 Installing as VM Download the ISO Architecture: amd64 Image type: DVD ISO General VM Settings OS Type â†’ FreeBSD (64-bit) Option Minimum My conf Recommended CPU 1 cores 2 cores multi core Memory 512 MB 2 GB â‰¥ 4 GB Disk Size 8 GB 16 GB 120 GB First-time login credentials: Username: installer Password: opnsense After logging in, the system will automatically launch the text-based installer. Accept license and keyboard layout Choose Install (UFS) or (ZFS) Select target disk Set a new password for the root user Wait for installation to complete Remove the ISO and reboot ","date":"2025-05-26","objectID":"/posts/opnsense/:1:0","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"1.2 First Login to OPNsense After reboot, you can log: From LAN network: https://opnsense.localdomain or https://192.168.1.1 From WAN we need disable Firewall (Shell): pfctl -d Default credentials: Username: root Password: opnsense ğŸ‘‰ System \u003e Wizard General Setup Set hostname, domain (optional), and DNS servers. Select your time zone. Configure interfaces (WAN / LAN). Set a new root password. ","date":"2025-05-26","objectID":"/posts/opnsense/:1:1","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"1.3 Configure WEB access from WAN ğŸ‘‰ Firewall \u003e Rules \u003e WAN add new Rule Protocol: TCP Destination: WAN address Destination port range From: (other) 8080 To: (other) 8080 ğŸ‘‰ System \u003e Settings \u003e Administration Protocol: HTTPS access TCP Port: 8080 ğŸ‘‰ System \u003e Firmware \u003e Plugins Install os-vmware ","date":"2025-05-26","objectID":"/posts/opnsense/:1:2","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"1.4 System Updates and Backup Configuration ğŸ‘‰ System \u003e Firmware \u003e Status Click Check for updates â†’ then Apply updates. ğŸ‘‰ System \u003e Configuration \u003e Backups Download a local .xml backup of your configuration. You can also enable automatic backups to cloud services like Google Drive, Nextcloud, etc. ","date":"2025-05-26","objectID":"/posts/opnsense/:1:3","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"Useful Resources ğŸ“š Official OPNsense Documentation ğŸ¥ YouTube: OPNsense Tutorials ","date":"2025-05-26","objectID":"/posts/opnsense/:1:4","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.1 WireGuard Site-to-Site VPN Setup WireGuard is a fast and modern VPN solution known for its simplicity and performance. âœ… What Youâ€™ll Need Two OPNsense firewalls with internet access (Site A and Site B) Static or dynamic public IPs (DDNS works) Site A -\u003e WAN IP 203.0.113.1 and LAN IP 192.168.1.1/24 Site B -\u003e WAN IP 203.0.113.2 and LAN IP 192.168.2.1/24 WireGuard plugin installed (os-wireguard) ","date":"2025-05-26","objectID":"/posts/opnsense/:2:0","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.2 Create WireGuard Instance ğŸ‘‰ VPN \u003e WireGuard \u003e Instances Click + Add to create a new instance. Enabled Name: site-a on Site A / site-b on Site B Click âš™ï¸ Generate new keypair Listen Port 51820 Tunnel Address Site A: 10.2.2.1/24 Site B: 10.2.2.2/24 Peers: it will be needed after peer created ğŸ’¾ Press Save and Apply âš ï¸ After saving, copy the Public Key. Youâ€™ll need it on the remote site. ","date":"2025-05-26","objectID":"/posts/opnsense/:2:1","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.3 Configure Peer ğŸ‘‰ VPN \u003e WireGuard \u003e Peers Click + Add to create a new peer. Enabled Name: site-b on Site A / site-a on Site B Public Key of the remote site Allowed IPs: remote local subnet and Instance IP On Site A: 10.2.2.2/32 192.168.2.0/24 On Site B: 10.2.2.1/32 192.168.1.0/24 Endpoint Address: remote WAN IP (or DDNS) On Site A: 203.0.113.2 On Site B: 203.0.113.1 Endpoint Port: 51820 ğŸ’¾ Press Save and Apply âš ï¸ Now go back to Instances, edit your instance, and add this peer to Peers. ğŸ’¾ Press Save and Apply Enable WireGuard and ğŸ’¾ Press Apply ","date":"2025-05-26","objectID":"/posts/opnsense/:2:2","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.4 Create Interfaces ğŸ‘‰ Interfaces \u003e Assignments Assign the new WireGuard interface (wg0) Enable it: Set name: WG_SITEA / WG_SITEB ğŸ’¾ Press Save and Apply ","date":"2025-05-26","objectID":"/posts/opnsense/:2:3","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.5 Set Up Firewall Rules ğŸ‘‰ Firewall \u003e Settings \u003e Normalization Interface: WireGuard (Group) Direction: Any Protocol: any Source: any Destination: any Destination port: any Description: Wireguard MSS Clamping Max mss: 1380 or lower, subtract at least 40 bytes from the Wireguard MTU ğŸ‘‰ Firewall \u003e Rules \u003e WAN Action: Pass Interface: WAN Direction: In TCP/IP Version: IPv4 Protocol: UDP Source: Remote WAN IP On Site A: 203.0.113.1 On Site B: 203.0.113.2 Destination: WAN address Destination port: 51820 Description: On Site A: Allow Wireguard from Site B to Site A On Site B: Allow Wireguard from Site A to Site B ğŸ‘‰ Firewall \u003e Rules \u003e LAN Action: Pass Interface: LAN Direction: In TCP/IP Version: IPv4 Protocol: Any Source: Remote LAN IP On Site A: 192.168.2.0/24 On Site B: 192.168.1.0/24 Destination: LAN net Destination port: 51820 Description: On Site A: Allow LAN Site B to LAN Site A On Site B: Allow LAN Site A to LAN Site B ğŸ‘‰ Firewall \u003e Rules \u003e Wireguard (Group) Action: Pass Interface: Wireguard (Group) Direction: In TCP/IP Version: IPv4 Protocol: Any Source: Remote LAN IP On Site A: 192.168.2.0/24 On Site B: 192.168.1.0/24 Destination: LAN net Destination port: 51820 Description: On Site A: Allow LAN Site B to LAN Site A On Site B: Allow LAN Site A to LAN Site B ğŸ‘‰ VPN \u003e WireGuard \u003e Status âœ… Check for handshake and endpoint status. ğŸ‘‰ Interfaces \u003e Diagnostics \u003e Ping Try pinging remote LAN IP (e.g., from 192.168.1.1 â†’ 192.168.2.1) ","date":"2025-05-26","objectID":"/posts/opnsense/:2:4","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"Useful Resources ğŸ“š Official OPNsense Documentation ","date":"2025-05-26","objectID":"/posts/opnsense/:2:5","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"3.1 IPsec VPN for iOS and macOS This guide walks you through the setup of an IPsec VPN server on OPNsense that works with iOS and macOS devices. Tested with: OPNsense 23.1.7_3 â€“ 24.7.5_3 iOS 16+ macOS Monterey+ ","date":"2025-05-26","objectID":"/posts/opnsense/:3:0","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ‘¥ 3.1 (Optional) Create a VPN Group System â†’ Access â†’ Groups â†’ Add Group name: VPN Description: VPN users ","date":"2025-05-26","objectID":"/posts/opnsense/:3:1","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ‘¤ 3.2 Create a VPN User System â†’ Access â†’ Users â†’ Add Username: vpnuser Password: [secure password] Member Of: VPN (optional, if you created the group) ","date":"2025-05-26","objectID":"/posts/opnsense/:3:2","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸŒ 3.3 Configure IPsec Mobile Clients VPN â†’ IPsec â†’ Mobile Clients âœ… Enable IPsec Mobile Client Support Backend for authentication: Local Database Enforce local group: VPN (optional) IP Address Pool âœ… Provide a virtual IPv4 address Address Pool: 192.168.2.0/24 DNS Servers âœ… Provide DNS server list Server 1: 192.168.1.1 (local router IP) Server 2: 8.8.8.8 Server 3: 8.8.4.4 Phase 2 PFS Group: Off Save and Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:3","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ”‘ 3.4 Create Phase 1 Click â€œCreate Phase1â€ at the top blue bar. Connection method: default Key Exchange version: auto Interface: WAN Description: Mobile VPN Authentication: Mutual PSK + Xauth My identifier: My IP address Pre-Shared Key: [store securely] Algorithms AES 256 Hash: SHA256, SHA384, SHA512 DH group: 2, 5, 14â€“18 âœ… Install policy NAT Traversal: Enable Lifetime: 28800 Save and Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:4","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ”„ 3.5 Create Phase 2 VPN â†’ IPsec â†’ Tunnel Settings Click â• in Commands column of Phase 1 row. Mode: Tunnel IPv4 Type: Network Address: 0.0.0.0/0 Protocol: ESP Encryption: AES128, AES192, AES256 Hash: SHA256, SHA384, SHA512 PFS: Off Lifetime: 3600 Save and Apply ","date":"2025-05-26","objectID":"/posts/opnsense/:3:5","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"âœ… 3.6 Enable IPsec VPN â†’ IPsec â†’ Tunnel Settings âœ… Enable IPsec (bottom of page) Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:6","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ”¥ 3.7 Configure Firewall: WAN Rules Firewall â†’ Rules â†’ WAN â†’ Add 3 rules: Protocol: ESP â†’ Destination: WAN â†’ Description: IPsec ESP Protocol: TCP/UDP â†’ Port: ISAKMP (500) â†’ Description: IPsec ISAKMP Protocol: UDP â†’ Port: NAT-T (4500) â†’ Description: IPsec NAT-T âœ… Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:7","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ”’ 3.8 Configure Firewall: IPsec Rules Firewall â†’ Rules â†’ IPsec Protocol: Any Source: Any Destination: Any âœ… Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:8","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸŒ 3.9 Outbound NAT Firewall â†’ NAT â†’ Outbound Mode: Automatic outbound NAT Confirm 192.168.2.0/24 is listed ","date":"2025-05-26","objectID":"/posts/opnsense/:3:9","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ“¡ 3.10 Allow DNS from VPN Services â†’ Unbound DNS â†’ Access Lists â†’ Add Access List name: 192.168.2.0/24 Action: Allow Network: 192.168.2.0/24 Description: VPN DNS access Save and Apply ","date":"2025-05-26","objectID":"/posts/opnsense/:3:10","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ”„ 3.11 (Optional) Allow Multi-Device Connections In Phase 1, set: Unique ID: no This allows one user to connect from multiple devices. ","date":"2025-05-26","objectID":"/posts/opnsense/:3:11","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ“² 3.12 iPhone VPN Configuration Settings â†’ VPN â†’ Add VPN Configurationâ€¦ Type: IPsec Server: [OPNsense public IP] Account: vpnuser Password: [user password] Secret: [Pre-Shared Key] Leave â€œGroup Nameâ€ empty ","date":"2025-05-26","objectID":"/posts/opnsense/:3:12","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ’» 3.13 macOS VPN Configuration System Preferences â†’ Network â†’ + â†’ Interface: VPN VPN Type: Cisco IPSec Server Address: [OPNsense public IP] Account Name: vpnuser Password: [user password] Shared Secret: [Pre-Shared Key] âœ… Save and Connect ","date":"2025-05-26","objectID":"/posts/opnsense/:3:13","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ’¡ Troubleshooting If DNS doesnâ€™t work â€” try restarting the router Double-check firewall and mobile client settings Use strong, unique Pre-Shared Keys and passwords ğŸ“ Published on blog.topli.ch ","date":"2025-05-26","objectID":"/posts/opnsense/:3:14","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"}]