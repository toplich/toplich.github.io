[{"categories":null,"content":"1. Creating and Configuring a VMware Cluster ┌ │ └ ─ ─ ─ E ─ ─ S ─ ─ X ─ ┌ ▼ i ─ ─ ─ ─ ─ ─ 1 ─ ─ ─ ─ ┌ │ │ └ ─ ┐ │ ┘ ─ ─ ─ ─ [ ─ ─ ─ D ─ ─ ─ V R ─ ─ ─ M S ─ ─ ─ w ─ ─ ─ a + ─ ─ ─ r ─ ─ [ ─ e H ─ ─ . - A ┬ ┼ ▼ . ─ C ─ ─ . ─ l + ─ ─ ] ─ u ─ ─ ─ s v ─ ─ ─ t S ─ ─ ─ e A ─ ─ ─ r N ─ ─ ─ ] ─ ─ ─ ─ ─ ┐ │ │ ┘ ─ ┌ │ └ ─ ─ ─ ─ ─ E ─ ─ ─ S ─ ┐ ▼ X ─ ─ i ─ ─ ─ ─ N ─ ─ ─ ┐ │ ┘ Creating a cluster in VMware vCenter is the foundational step for enabling features like High Availability (HA), Distributed Resource Scheduler (DRS), and vSAN. This section will guide you through the basic steps to create a production-ready cluster and connect ESXi hosts. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:1:0","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"📌 Prerequisites A functioning vCenter Server instance. At least 2 ESXi hosts (3+ recommended for full vSAN functionality). Proper IP connectivity between hosts and vCenter. DNS resolution working across the environment. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:1:1","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🛠 Step-by-Step: Cluster Creation Log into vCenter using the vSphere Web Client. In the left navigation pane, right-click your Datacenter and choose: New Cluster Provide a meaningful name for your cluster (e.g., Production-Cluster). Enable the following features: ✅ DRS – Automatically balances workloads between hosts. ✅ HA – Ensures VM restart in case of host failure. ✅ vSAN – Enables distributed storage (if applicable). Click Next and complete the wizard. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:1:2","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"➕ Adding Hosts to the Cluster After the cluster is created: Select the cluster name, then click Add Hosts. Provide the hostname/IP of each ESXi server. Enter root credentials and validate the connection. Review and confirm SSL thumbprint. Finish the wizard to add the host. Repeat this step for each ESXi host in your environment. ⚠️ If your ESXi hosts already contain virtual machines and vSwitches, ensure you migrate networking and storage configurations appropriately before or after adding them to the cluster. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:1:3","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"✅ Initial Cluster Configuration After adding the hosts, you can further configure the cluster: Configure host licensing. Review network redundancy (dual NICs recommended). Set up vMotion and VMkernel adapters. (Optional) Prepare for vSAN or shared storage. Enable EVC (Enhanced vMotion Compatibility) if mixing CPU generations. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:1:4","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🎯 Best Practices Name the cluster based on its function: Mgmt-Cluster, App-Cluster, Test-Cluster, etc. Always validate hardware compatibility via the VMware Compatibility Guide. Maintain identical ESXi versions across all hosts. Ensure time synchronization (NTP) is properly set across all nodes. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:1:5","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"2. Configuring vDS and Network Design ┌ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ └ ─ ─ ─ ─ ─ ─ v v ─ P V V v M S ─ P V v v M S ─ P V v v M S v ─ ─ m m ─ o L M m T e ─ o L M m T e ─ o L M m T e S ─ ─ n n ─ r A k k U r ─ r A k k U r ─ r A k k U r A ─ ─ i i ─ t N e 0 : v ─ t N e 1 : v ─ t N e 1 : v N ─ ─ c c ─ r i ─ r i ─ r i , ─ ─ E 0 1 ─ G I n : 1 c ─ G I n : 9 c ─ G I n : 9 c ─ ─ S ─ r D e 5 e ─ r D e 0 e ─ r D e 0 e v ─ ─ X ─ o l 1 0 s ─ o : l 1 0 s ─ o : l 1 0 s S ─ ─ I ─ u : 9 0 : ─ u 9 0 : ─ u 9 0 : A ─ ─ ─ p P 2 ─ p 2 P 2 ─ p 3 P 2 N ─ ─ 1 U U ─ : o . M ─ : 0 o . v ─ : 0 o . ─ ┌ │ │ │ │ │ │ └ ┌ │ ▼ ─ p p ─ r 1 a ─ r 1 M ─ r 1 W ─ ─ ─ ─ ─ ─ l l ─ v 1 t 6 n ─ v t 6 o ─ v t 6 i ─ ─ ─ N v v ─ ─ ─ i i ─ D 0 s 8 a ─ D s 8 t ─ D s 8 t ─ ─ ─ a D D ─ ─ ─ n n ─ S . g ─ S . i ─ S . n ─ ─ ─ m S S ─ ─ ─ k k ─ _ 1 e ─ _ 2 o ─ _ 3 e ─ ─ ─ e _ _ ─ ─ ─ ─ M 0 m ─ v 0 n ─ v 0 s ─ ─ ─ M W ─ ─ ─ 1 2 ─ G . e ─ M . ─ S . s ─ ─ ─ G A ─ ─ ─ ─ M 1 n ─ o 1 ─ A 1 ─ ─ ─ M N ─ ─ ─ ─ T 1 t ─ t 1 ─ N 1 ─ ─ ─ T ─ ─ ─ ─ ─ ─ ─ ┌ │ │ │ └ ┌ │ │ │ └ ─ ─ ─ ─ ┐ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ ┘ ─ ─ ─ ─ ─ ─ ─ V 1 1 ─ ─ ─ ( ─ ─ ─ U ─ ─ ─ L 0 0 ─ ─ ─ D ─ ─ ─ p ─ ─ ─ A 0 ─ ─ ─ i ─ ─ ─ l ─ ─ ─ N ─ ─ ─ s ─ ─ ─ i ─ │ ▼ ─ ─ ─ ─ ─ t ─ ─ ─ n ─ ─ P ─ M 1 1 ─ ─ ─ r ─ ─ ─ k ─ ─ o ─ T 5 5 ─ ─ ─ v i M ─ ─ U ─ ─ ─ r ─ U 0 0 ─ ─ ─ D b T ─ ─ p ─ 1 ─ ─ t ─ 0 0 ─ ─ [ ─ S u U ─ ─ l ─ ─ ─ ─ ─ ─ . ─ _ t : ┬ │ ▼ ─ i ┐ │ ─ ─ G ─ │ │ │ │ ─ │ ┼ │ ▼ . ─ M e ─ ─ n ─ ─ ─ r ─ ─ ─ . ─ a d 9 ─ ─ k ─ U ─ ─ o ─ N v v v ─ ─ ] ─ i 0 ─ ─ s ─ p ─ ─ u ─ a D D D ─ ─ ─ n S 0 ─ ─ ─ l ─ ─ p ─ m S S S ─ ─ ─ w 0 ─ ─ ─ i ─ ─ s ─ e _ _ _ ─ ─ ─ i ─ ─ ─ n ─ ─ ─ v v L ─ ─ ─ t ─ ─ ─ k ─ │ ▼ ─ ─ M S A ─ ─ ─ c ─ ─ ─ ─ ─ ─ o A N ─ ─ ─ h ─ ─ ─ 2 ─ ─ ─ t N ─ ─ ─ ) ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ V 2 3 2 ─ ─ ┌ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ └ ┐ │ │ │ ┘ ┐ │ │ │ ┘ ─ ─ L 0 0 0 ─ ─ ─ ─ ─ ─ ─ ─ ─ A 0 ─ ─ ─ v v ─ P V v v M S ─ P V v v M S ─ P V v v M S v ─ ─ ─ N ─ ─ ─ m m ─ o L M m T e ─ o L M m T e ─ o L M m T e S ─ ─ ─ ─ ─ ─ n n ─ r A k k U r ─ r A k k U r ─ r A k k U r A ─ ─ ─ M 9 9 1 ─ ─ ─ i i ─ t N e 1 : v ─ t N e 1 : v ─ t N e 1 : v N ─ ─ ─ T 0 0 5 ─ ─ ─ c c ─ r i ─ r i ─ r i , ─ ─ ─ U 0 0 0 ─ ─ ─ E 0 1 ─ G I n : 1 c ─ G I n : 9 c ─ G I n : 9 c ─ ─ ─ 0 0 0 ─ ─ ─ S ─ r D e 5 e ─ r D e 0 e ─ r D e 0 e v ─ ─ ─ ─ ─ ─ X ─ o : l 1 0 s ─ o : l 1 0 s ─ o : l 1 0 s S ─ ┐ │ │ │ │ │ │ ┘ ┐ │ ▼ ─ I ─ u 9 0 : ─ u 9 0 : ─ u 9 0 : A ─ ─ ─ p 1 P 2 ─ p 2 P 2 ─ p 3 P 2 N ─ ─ N U U ─ : 0 o . M ─ : 0 o . v ─ : 0 o . ─ ─ p p ─ r 1 a ─ r 1 M ─ r 1 W ─ ─ l l ─ v t 6 n ─ v t 6 o ─ v t 6 i ─ ─ i i ─ D s 8 a ─ D s 8 t ─ D s 8 t ─ ─ n n ─ S . g ─ S . i ─ S . n ─ ─ k k ─ _ 1 e ─ _ 2 o ─ _ 3 e ─ ─ ─ M 0 m ─ v 0 n ─ v 0 s ─ ─ 1 2 ─ G . e ─ M . ─ S . s ─ ─ ─ M 1 n ─ o 1 ─ A 1 ─ ─ ─ T N t ─ t N ─ N N ─ ─ ─ ─ ─ ─ ┐ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ ┘ A Distributed Switch (vDS) provides centralized management of networking across all ESXi hosts in your cluster. It enables consistent configuration of port groups, VMkernel adapters, and uplinks. This section walks you through the setup of a minimal but robust networking environment. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:2:0","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🎯 Recommended Network Design (Minimal Topology) For a basic production cluster with two ESXi hosts and one vCenter, the following roles should be isolated logically (or via VLANs): Traffic Type Interface Purpose Example VLAN Example IP Address Management vCenter \u0026 ESXi control VLAN 10 192.168.10.x vMotion Live VM migration VLAN 20 192.168.20.x vSAN Storage traffic VLAN 30 192.168.30.x VM Network (LAN) Internal services/apps VLAN 100 192.168.100.x VM Network (WAN) External/Internet-bound VLAN 200 192.168.200.x Each host should have at least 2 physical NICs. Use NIC teaming or dedicate one NIC per role (preferred for performance and fault tolerance). ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:2:1","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🛠 Step-by-Step: Creating a vDS In the vSphere Web Client, right-click the Datacenter → Distributed Switch → New Distributed Switch. Set: Name: vDS_Main Version: Match your ESXi version (e.g., 8.0.0) Number of Uplinks: 2 (adjust if more NICs) Enable Network I/O Control Click Finish. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:2:2","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"➕ Add Hosts to the vDS Select the newly created vDS_Main. Right-click → Add and Manage Hosts → Add Hosts. Select the ESXi hosts from your cluster. Map each uplink to a physical NIC on the host: Uplink1 → vmnic0 Uplink2 → vmnic1 ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:2:3","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🌐 Create Distributed Port Groups Each logical network gets its own port group. Name VLAN ID Description vDS_MGMT 10 Management / vCenter traffic vDS_VSAN 30 vSAN storage replication vDS_VMOT 20 vMotion traffic vDS_LAN 100 Internal VM traffic vDS_WAN 200 External traffic (if needed) Use descriptive names for each port group and match the correct VLAN ID based on your switch configuration. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:2:4","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🧠 Configure VMkernel Adapters For each ESXi host: Go to Host → Configure → VMkernel Adapters → Add VMkernel Adapter. Create one adapter per role: Port Group IP Address Services Enabled vDS_MGMT 192.168.10.11 ✅ Management vDS_VMOT 192.168.20.11 ✅ vMotion vDS_VSAN 192.168.30.11 ✅ vSAN Use separate subnets and gateways where required. The vSAN and vMotion interfaces typically have no default gateway. Repeat for other hosts with: .12 for Host 2 .13 for Host 3 (if any) ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:2:5","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"💡 Best Practices Separate critical services (Management, vSAN, vMotion) into different VLANs or physical NICs. Use LACP or Active/Standby NIC teaming for redundancy. Enable Network I/O Control to prioritize traffic types. Always label your Port Groups clearly — consistent naming saves time during troubleshooting. For 3+ hosts, consider dedicating NICs solely for vSAN performance. Next up, we’ll dive into setting up vSAN, including disk claiming, witness host deployment, and storage policy configuration. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:2:6","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"3. vSAN Setup and Configuration ┌ │ │ │ │ └ ─ ─ ─ ─ E ─ L - ─ ─ S ─ o ─ ─ X ─ c S ─ ─ i ─ a S ─ ─ ─ l D ─ ┌ │ ▼ H ─ ┬ │ └ ─ ─ o ─ D / ─ ─ ─ ─ s ─ i ─ ─ ─ ─ t ─ s H ─ ─ ─ ─ ─ k D ─ ─ ─ ─ 1 ─ s D ─ ─ ─ ─ A ─ ─ ─ ┌ │ │ └ ─ ─ ─ ─ ─ ─ ─ ─ ┐ │ │ │ │ ┘ ─ ─ ( ─ ─ ┌ │ │ │ │ └ ─ ─ F ─ ─ ─ ─ ─ ─ ─ a ─ ─ ─ E ─ L - ─ ─ ─ u ─ ─ ─ S ─ o ─ ─ ─ l ─ ─ ─ X ─ c S ─ ─ ─ S t ─ ─ ─ i ─ a S ─ ─ ─ i ─ ─ ─ ─ l D ─ ─ ┌ │ └ ┌ │ ▼ t D ┬ ┼ │ ▼ H ─ ┬ └ ─ ─ ─ ─ ─ e o ─ ─ ─ o ─ D / ─ ─ ─ ─ V ─ ─ ─ m ─ ─ ─ s ─ i ─ ─ ─ ─ M ─ ─ ─ A a ─ ─ ─ t ─ s H ─ ─ ─ ─ ─ ─ ─ i ─ ─ ─ ─ k D ─ ─ ─ ─ o ─ ─ ─ n ─ ─ ─ 2 ─ s D ─ ─ ─ ─ n ─ ─ ─ ─ ─ ─ A ─ ─ ─ ─ ─ ─ ─ ─ A ─ ─ ─ ─ ─ ─ ─ ─ H ─ S ─ ─ ) ─ ─ ┐ │ │ │ │ ┘ ─ ─ ┌ │ │ └ ─ o ─ t ─ ─ ─ ─ ┌ │ │ │ │ └ ─ ─ ─ ─ ─ s ─ ( r ─ ┐ │ │ ┘ ─ ─ ─ ─ ─ ┐ ▼ ─ ─ t ─ V e ┌ │ │ ┼ └ ─ ─ E ─ L - ─ ─ ─ ─ ─ ─ i t ─ ─ ─ ─ S ─ o ─ ─ ─ ─ ─ 1 ─ r c ─ W ─ ─ ─ X ─ c S ─ ┐ │ ▼ ─ ─ ─ t h ─ i ─ ─ ─ i ─ a S ─ ─ ─ ┐ ┼ ┘ u e ─ t ─ ─ ─ ─ l D ─ ─ ─ ─ a d ─ n ─ ┐ │ ▼ H ─ ┬ │ │ ▼ f ─ ─ l ─ W e ─ R B ─ o ─ D / ─ ─ o ─ ─ C ─ i s ─ A e ─ s ─ i ─ ─ r ─ ─ S l ─ t s ( ─ I t ─ t ─ s H ─ ─ ─ ─ V t u ─ n q ─ D w ─ ─ k D ─ ─ v a ─ ─ M o s ─ e h u ─ - e ─ 3 ─ s D ─ ─ S l ▲ │ ┘ w r t ─ s o o ─ 1 e ─ A ─ ─ ─ A l ─ a a e ─ s l r ─ n ─ ─ ─ ─ N ─ r g r ─ d u ─ R ┐ │ │ │ │ ┘ ─ V ─ [ e e ─ A s m ─ e S ─ D M ─ . a ─ p ─ p i ─ a s ▲ │ │ . v A n ─ p m ─ l t ┌ │ │ │ │ └ ─ t ─ . S r d ─ l e o ─ i e ─ ─ ─ ─ a i ─ ] A e ─ i t t ─ c s ─ E ─ L - ─ ─ s n ─ N a F ─ a a e ─ a ─ S ─ o ─ ─ t ─ a ─ n d ) ─ t A ─ X ─ c S ─ ─ o c ▲ │ └ N u ─ c a ─ i ─ i ─ a S ─ ─ r l ─ ─ e l ─ e t ─ B ─ ─ l D ─ ─ e u ─ ─ t t ─ a ─ n ┌ │ ▼ H ─ ┬ │ │ ▼ s ─ ─ w ─ ─ ─ ─ o ─ D / ─ ─ t ─ ─ o D ─ o ─ ─ ─ s ─ i ─ ─ e ─ ─ r o ─ n ─ ─ ─ t ─ s H ─ ┌ │ ▼ r ─ ─ k m ─ l ─ ─ ─ ─ k D ─ ─ ─ ─ ─ ) a ─ y ─ ─ ─ 1 ─ s D ─ ─ ─ ─ ┌ ┼ └ i ┐ │ │ ┼ ┘ ─ ─ B ─ ─ ─ ┌ ▼ ─ ─ ─ n ─ ┌ │ │ └ ─ ─ ─ ─ ─ ─ ─ ─ ─ V ─ s ─ ─ ─ ─ ┐ │ │ │ │ ┘ ─ ─ ┐ │ │ ┘ ─ M ─ ─ ─ ( ─ ─ ┌ │ │ │ │ └ ─ ─ ─ ─ ─ ─ F ─ ─ ─ ─ ─ ─ ─ ─ o ─ ─ ─ a ─ ─ ─ E ─ L - ─ ─ ─ ─ n ─ ─ ─ u ─ ─ ─ S ─ o ─ ─ ─ ─ ─ ─ ─ l ─ ─ ─ X ─ c S ─ ─ ─ ─ H ─ ─ ─ S t ─ ─ ─ i ─ a S ─ ─ ─ ─ o ─ ─ ─ i ─ ─ ─ ─ l D ─ ─ ─ ─ s ─ ┐ │ ▼ t D ┬ ┼ │ ▼ H ─ ┬ ┘ ─ ─ t ─ ─ e o ─ ─ ─ o ─ D / ─ ─ ─ ─ ─ m ─ ─ ─ s ─ i ─ ─ ─ N ─ ─ B a ─ ─ ─ t ─ s H ─ ─ ─ ─ ─ i ─ ─ ─ ─ k D ─ ─ ┐ │ ┘ ─ n ─ ─ ─ 2 ─ s D ─ ─ ─ ─ ─ ─ B ─ ─ ─ ─ B ─ ─ ─ ─ ─ ─ ─ ) ─ ─ ┐ │ │ │ │ ┘ ─ ─ ─ ─ ┌ │ │ │ │ └ ─ ┐ │ │ ┘ ─ ─ ─ ─ ─ ─ ─ E ─ L - ─ ─ ─ ─ S ─ o ─ ─ ─ ─ X ─ c S ─ ─ ─ ─ i ─ a S ─ ─ ─ ─ ─ l D ─ ─ ┐ │ ▼ H ─ ┬ │ ┘ ─ o ─ D / ─ ─ s ─ i ─ ─ t ─ s H ─ ─ ─ k D ─ ─ 3 ─ s D ─ ─ B ─ ─ ─ ─ ─ ┐ │ │ │ │ ┘ VMware vSAN pools local disks from each ESXi host to create a resilient, shared datastore — enabling a hyperconverged infrastructure. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:0","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🔍 vSAN Architecture: ESA vs OSA ┌ │ └ ┌ │ └ ┌ │ │ │ │ │ └ ─ ─ ─ ─ ─ ─ ─ ─ ( ─ D ─ ─ C ─ ─ C ─ ─ C ─ O ─ i ─ ─ a ─ ─ a ─ ─ a ─ r ─ s ─ ─ c ─ H ─ p ─ ─ p ─ i ─ k ─ ─ h ─ D ─ a ─ ─ a ─ g ─ ─ ─ e ─ D ─ c ─ [ ─ c ─ i ┌ ▼ ─ G ┬ ▼ ─ ┬ ▼ / ─ i ─ . ─ i ─ n ─ ─ r ─ ─ T ─ S ─ t ─ . ─ t ─ a ─ ─ o ─ ─ i ─ D ─ y ─ . ─ y ─ l ┌ │ └ ─ ─ u ─ ─ e ─ D ─ ─ ] ─ ─ ─ ─ ─ ─ p ─ ─ r ─ ─ D ─ ─ D ─ S ─ ─ ─ ─ 1 ─ ─ ─ ─ i ─ ─ i ─ t ─ E ─ ─ ┐ │ ┘ ┐ │ ┘ ─ s ─ ─ s ─ V o ─ S ─ ─ S \u003c ─ k ─ ─ k ─ S r ─ X ─ ─ [ S - ─ 1 ─ ─ N ─ A a ─ i ─ ─ . D ─ ─ ─ ─ N g ─ ┬ ┼ ▼ . / 1 ┐ │ │ │ │ │ ┘ e ─ H ─ ─ . N x ┌ │ │ │ │ │ └ O ─ o ─ ─ ] V ─ ─ ─ ─ S A ─ s ─ ─ M ─ C ─ ─ C ─ A r ─ t ─ ─ ┌ │ └ e \u003e ─ a ─ ─ a ─ c ─ ─ ─ ─ ─ ┌ │ └ ─ p ─ ─ p ─ h ─ ─ ─ ─ D ─ ─ ─ ─ a ─ ─ a ─ i ┐ │ ┘ ─ ─ i ─ ─ C ─ ─ c ─ ─ c ─ t ─ ─ s ─ ─ a ─ H ─ i ─ [ ─ i ─ e ─ ─ c ─ ─ c ─ D ─ t ─ . ─ t ─ c ─ ─ ─ ─ h ─ D ─ y ─ . ─ y ─ t ┐ ▼ ─ G ┬ ▼ ─ e ┬ ▼ / ─ ─ . ─ ─ u ─ r ─ ─ ─ S ─ D ─ ] ─ D ─ r ─ o ─ ─ T ─ D ─ i ─ ─ i ─ e ─ u ─ ─ i ─ D ─ s ─ ─ s ─ ) ─ p ─ ─ e ─ ─ k ─ ─ k ─ ─ N ─ ─ r ─ ─ 1 ─ ─ N ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐ │ ┘ ┐ │ ┘ ┐ │ │ │ │ │ ┘ ( E x p r e s s ┌ │ └ ┌ │ │ └ ─ ─ ─ ─ V S ─ ─ ─ A S ─ S t ─ E ─ ─ l t ─ A o ─ S ─ ─ l o ─ N r ─ X ─ ─ - r ─ a ─ I ─ ─ F a ─ E g ─ ┬ ▼ ─ l g ─ S e ─ H ─ ─ a e ─ A ─ o ─ ─ s ─ A ─ s ─ ─ h P ─ r ─ t ─ ─ o ─ c ─ ─ ─ o ─ h ─ ─ ─ l ─ i ┐ │ ┘ ┐ │ │ ┘ t e c t u r e ) Feature OSA (Original Storage Arch.) ESA (Express Storage Arch.) Introduced in vSAN 5.5 vSAN 8.0 Cache/Capacity Separation Required Not required Performance Optimization Manual Built-in, adaptive Disk Requirements SSD + HDD All NVMe/SSD only Licensing Enterprise Plus Enterprise Plus (w/ ESA support) Recommendation: If you’re using modern NVMe disks and vSAN 8+, choose ESA for simplicity and better performance. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:1","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"📦 Hardware Requirements Minimum: 3 ESXi hosts, or 2 hosts + 1 Witness Each host must have: At least 1 SSD/NVMe for cache (OSA) At least 1 HDD or SSD for capacity All hosts must have same ESXi version RAID controllers in passthrough or RAID0 mode (JBOD) Consistent network config and IP ranges ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:2","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🛠 Step-by-Step: Enable vSAN Go to Cluster → Configure → vSAN → Services Click Configure Choose vSAN Type: vSAN HCI – Most common vSAN Max – Disaggregated storage pool Cluster topology: ✅ Two node cluster – for edge or small sites ✅ Single site cluster – standard 3+ host deployment Choose architecture: ✅ vSAN ESA (if supported) or ❌ OSA (legacy method) ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:3","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"⚙️ Feature Configuration Option Recommendation Compression ✅ Enabled (ESA only) Deduplication ❌ Optional (OSA only) Encryption at Rest ❌ Optional Encryption in Transit ✅ (default from vSAN 7 U1) Allow reduced redundancy ✅ Useful for maintenance mode RDMA support ❌ Unless special HW used ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:4","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🌐 Fault Domains \u0026 Stretched Cluster Configuration vSAN allows for advanced availability setups using Fault Domains and Stretched Clusters. These features ensure data resilience even during site or rack-level failures. 🧱 Fault Domains (FDs) Used to group ESXi hosts that might fail together, such as those in the same rack, power domain, or chassis. Ensures that vSAN places replica components across different FDs, not just different hosts. Configure FDs under Cluster → Configure → vSAN → Fault Domains. Use Case Benefit Hosts in same rack Protect against rack-level failure Edge deployments Use 2-node with Witness as 3rd FD Larger clusters (6+ hosts) Improve replica distribution 💡 At least 3 Fault Domains are required for RAID-1 with full availability. 🌍 Stretched Cluster A special vSAN topology designed for geographically separated sites. Consists of: 2 Active Fault Domains (Site A and Site B) 1 Witness Appliance (remote, vote-only, no data) Component Role Site A Half of data \u0026 compute Site B Other half of data \u0026 compute Witness Maintains quorum vSAN automatically replicates VM data between sites (RAID-1) and uses the Witness to avoid split-brain scenarios. 📝 Witness must be outside the two sites, reachable by both. 🧪 Stretched Cluster Example: RAID-1 or RAID-5 You can choose storage policies per VM: Policy Type Description RAID-1 (Mirroring) Best for performance, uses more space RAID-5 (Erasure Code) Space-efficient, needs 4+ data hosts RAID-1 across sites ensures 1:1 mirroring RAID-5 is intra-site only, used within each fault domain ✅ Best Practices Ensure low latency (≤ 5ms RTT) between active sites. Use dedicated VMkernel interfaces for vSAN on separate VLANs. Witness traffic should be isolated if possible. Monitor vSAN → Health → Stretched Cluster regularly. Use Stretched Cluster only when geographic redundancy is required — otherwise, configure simple Fault Domains. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:5","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"💾 Disk Claiming vCenter will automatically detect eligible disks. Tier Device Type Example Size Notes Cache Tier SSD / NVMe 250 GB+ Only in OSA mode Capacity HDD / SSD 500 GB+ All disks in ESA Assign disks to appropriate tiers. Confirm all hosts contribute capacity to the cluster. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:6","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🧪 Example: 2-node + Witness Topology 1 1 9 9 2 2 E . . S 1 1 X 6 6 I 8 8 . . 1 1 3 0 0 . . 1 1 1 1 W 1 i 9 t 2 n . e 1 v s 6 S s 8 A . N A 1 p 0 L p . i l 1 n i 0 k a 0 s n c e 1 1 9 9 2 2 . . E 1 1 S 6 6 X 8 8 I . . 1 3 2 0 0 . . 1 1 2 2 Node Management IP vSAN IP Role ESXI 1 192.168.10.11 192.168.30.11 Data + Compute ESXI 2 192.168.10.12 192.168.30.12 Data + Compute Witness VM 192.168.10.100 192.168.30.100 Voting only node 📝 Witness Appliance is a lightweight virtual machine. Deploy it using OVF template and place it outside the vSAN cluster. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:7","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🧰 Create vSAN Storage Policy Go to Policies and Profiles → VM Storage Policies Create a new policy: vSAN-Standard Configure: Name: vSAN-Standard vSAN rules: - Availability: \"2 failures – RAID-1 (Mirroring)\" - Object space reservation: Thin provisioning - Flash read cache: 0% - Force provisioning: Yes You can also create “No Redundancy” policies for single-host test environments. 🏁 Result: Shared Resilient Datastore After completing the wizard: A new vSAN Datastore appears under Datastores All eligible VMs can now be placed on vSAN Storage policies can be assigned during VM deployment or migration 💡 Best Practices Use separate VMkernel interfaces for vSAN traffic (VLAN + no gateway). Ensure jumbo frames are enabled (MTU 9000) if network supports it. Avoid mixing disk types or vendors within a cluster. Monitor health under vSAN → Health Enable troubleshooting logging if issues arise ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:3:8","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"4. Configuring High Availability (HA) I A n f i E t E d t S V e S o i X M r X w a I 1 I n l H 1 o 1 S s t t a t A e : f a i l V s M : 1 E E S i S V X d X M I l I 1 e 2 2 vSphere High Availability (HA) protects your virtual machines by restarting them on another ESXi host in the cluster if a failure occurs. HA is a critical feature in production environments to minimize downtime. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:0","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🎯 What Does HA Protect Against? Failure Type HA Protection Explanation ESXi Host Failure ✅ Yes VM restarts on surviving host VM Crash ❌ No Requires VMware FT or 3rd-party monitoring Storage Failure ⚠️ Limited Depends on vSAN resilience Network Partition ✅ Yes Uses Datastore or vSAN heartbeat ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:1","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🛠 Step-by-Step: Enabling HA Go to your cluster → Configure → vSphere Availability. Click Edit. Enable: ✅ Turn on vSphere HA (Optional) Enable Admission Control Under “Failure conditions and responses”: Host Failure Response: Restart VMs Isolation Response: Power off and restart VMs Click OK to apply. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:2","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🧠 Admission Control Explained Admission Control ensures that the cluster reserves enough resources to restart VMs if a host fails. Policy Type Description Slot Policy Based on largest CPU/memory reservation Cluster Resource Percentage Recomm. – reserve e.g., 33% CPU \u0026 memory Dedicated Failover Hosts Explicitly reserve 1 or more hosts Recommendation: Use Percentage-Based policy for flexibility and better resource utilization. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:3","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"⚙️ Advanced HA Options Heartbeat Datastores: Used to confirm host is alive during network isolation. Enabled automatically with vSAN. VM Monitoring: Restarts VMs if VMware Tools stops responding. Good for application crash recovery. Enable this under: Cluster → Configure → vSphere Availability → VM Monitoring Proactive HA (requires vendor plugin): Migrates VMs off hosts reporting hardware degradation (e.g., failed DIMMs, overheating) ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:4","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🛡 Recommended Settings Setting Value Host Monitoring ✅ Enabled VM Monitoring ✅ Enabled (medium sensitivity) Isolation Response Power off and restart VMs Datastore Heartbeating ✅ Use multiple datastores Admission Control Policy 33% reserved resources ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:5","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🔍 Example Scenario You have a 3-node vSAN cluster: 1 host fails → HA restarts VMs from that host on remaining 2 If Admission Control is enabled, only a safe number of VMs are allowed to power on initially to guarantee restart in case of failure ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:6","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"💡 Best Practices Always test HA by performing a host shutdown (not reboot). Monitor HA events in Events or Tasks tabs. Don’t disable Host Monitoring unless absolutely required (e.g., during firmware upgrades). Combine with DRS to ensure intelligent VM placement post-restart. In the next section, we will explore Distributed Resource Scheduler (DRS) — VMware’s intelligent load balancer for VM workloads. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:4:7","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"5. Configuring DRS (Distributed Resource Scheduler) B A e f f E L V V t E L V o S O M M e S O M r X A 1 2 r X A 1 e I D I D D D 1 9 R 1 6 R 0 S 0 S % % : M i g r a V t M i 2 o n : E L E L V S O S O M X A X A 2 I D I D 2 1 2 4 0 0 % % E L V E L V S O M S O M X A 3 X A 3 I D I D 3 4 3 4 5 5 % % VMware Distributed Resource Scheduler (DRS) is responsible for automatically balancing compute workloads (CPU and memory) across hosts in a cluster. It helps optimize performance and resource utilization with minimal manual intervention. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:0","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🎯 What DRS Does Monitors resource usage (CPU, RAM) across ESXi hosts Live migrates VMs (via vMotion) to balance loads Prioritizes critical workloads and improves availability DRS works only if vMotion is properly configured between hosts and there is shared storage (like vSAN or NFS). ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:1","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🛠 Step-by-Step: Enabling DRS Go to your cluster → Configure → vSphere DRS. Click Edit. Enable: ✅ Turn on vSphere DRS Set Automation Level: 🔘 Fully Automated (recommended) ⭕ Partially Automated (for initial placement only) ⭕ Manual (you approve every migration) Optionally set Migration Threshold: From Conservative (fewer moves) → Aggressive (more frequent balancing) Click OK. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:2","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🧪 Example Scenario 🛠 Example Scenario (Why Partially Automated is Safer) You have 3 hosts: Host01: Heavy load (90% CPU) Host02 / Host03: Idle or lightly loaded In Fully Automated mode: → DRS might vMotion critical database VMs without your knowledge. In Partially Automated mode: → DRS still recommends rebalancing, but you decide when and what to move. This is essential in environments where: Apps are sensitive to vMotion timing, Licensing or performance isolation matters, You need predictability during peak hours. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:3","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"⚙️ Advanced DRS Options Feature Description VM/Host Affinity Rules Keep VMs together or apart (e.g., DB + App tiers) Host Groups Define sets of hosts for special placement DRS Score (vSphere 7+) Shows VM happiness based on resource availability DRS for Maintenance Mode Automatically migrates VMs off host Predictive DRS (via vROps) Uses analytics to anticipate load ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:4","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"⚖️ Automation Level Explained Mode Behavior Use Case Manual Shows recommendations only Training/testing environments Partially Auto ✅ Automatic initial placement 🔒 Conservative or regulated operations 🔍 Manual approval for migrations 🛠 Controlled production environments Fully Automated Initial + ongoing migrations Lab/testing or low-risk workloads 🛡️ Recommended Mode: Partially Automated is recommended in most production environments. It provides automation without losing control, ensuring performance without risking unexpected migrations. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:5","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"🛡 Recommended Settings Setting Value DRS Mode ✅ Partially Auto Migration Threshold Level 3 or 4 (Balanced) Affinity Rules Define as needed Host Groups Use for licensing or zones Predictive DRS Optional (requires vROps) ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:6","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"💡 Best Practices Combine DRS with HA for maximum resiliency. Monitor DRS recommendations under Cluster → Monitor → DRS. Regularly review affinity/anti-affinity rules. For multi-tier apps (e.g., Web + DB), use anti-affinity to separate roles. Enable EVC for mixed CPU environments to ensure vMotion compatibility. With HA and DRS properly configured, your cluster can now balance workloads and survive hardware failures — fully automated, fully redundant. ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:7","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":null,"content":"✅ Summary of Cluster Setup Feature Purpose Configured in Section Cluster Aggregates hosts \u0026 enables features 1 vDS Centralized network configuration 2 vSAN Shared hyperconverged storage 3 HA VM restart on host failure 4 DRS Load balancing via vMotion 5 🧩 This completes your production-ready VMware cluster setup. If you’d like to export a full configuration checklist or Markdown version for documentation or GitHub repo, let me know! ","date":"2025-06-06","objectID":"/posts/vmware-cluster/:5:8","tags":["VMware","vSphere","vCenter","vSAN"],"title":"Creating and Configuring a VMware Cluster","uri":"/posts/vmware-cluster/"},{"categories":["networking"],"content":"🚀 Teleport is a modern open-source platform for secure access to your infrastructure: SSH, Kubernetes, databases, web apps, and even Windows desktops (RDP). ","date":"2025-05-29","objectID":"/posts/teleport/:0:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"Teleport Setup open-source ZTNA Platform ✅ Requirements A Linux server with a public IP address and DNS name (e.g., teleport.\u003cyour-domain\u003e) One or more Windows and Linux machines Basic terminal access (Linux + Windows) ","date":"2025-05-29","objectID":"/posts/teleport/:1:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"📌 Step 1: Configure DNS Create the following A records for your domain: `teleport.\u003cyour-domain\u003e` → your Linux server public IP *.`teleport.\u003cyour-domain\u003e` → your Linux server public IP This is required for Let’s Encrypt (ACME) to issue a valid TLS certificate. ","date":"2025-05-29","objectID":"/posts/teleport/:1:1","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"📥 Step 2: Install Teleport on Linux Install the latest stable version of Teleport: curl https://cdn.teleport.dev/install.sh | bash -s 17.4.8 ","date":"2025-05-29","objectID":"/posts/teleport/:1:2","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"⚙️ Step 3: Generate Teleport Configuration sudo teleport configure -o file --acme --acme-email=`teleport@yourdomain.com` --cluster-name=`teleport.\u003cyour-domain\u003e` This creates /etc/teleport.yaml with TLS auto-renewal using Let’s Encrypt. My working configuration version: v3 teleport: nodename: teleport.\u003cyour-domain\u003e data_dir: /var/lib/teleport log: output: stderr severity: INFO format: output: text auth_service: enabled: true listen_addr: 0.0.0.0:3025 cluster_name: teleport.\u003cyour-domain\u003e proxy_listener_mode: multiplex proxy_service: enabled: true web_listen_addr: 0.0.0.0:443 public_addr: teleport.\u003cyour-domain\u003e:443 acme: enabled: true email: teleport@\u003cyour-domain\u003e windows_desktop_service: enabled: \"no\" ssh_service: enabled: \"no\" ","date":"2025-05-29","objectID":"/posts/teleport/:1:3","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"▶️ Step 4: Start Teleport sudo systemctl enable teleport sudo systemctl start teleport Then open your browser and visit: https://teleport.\u003cyour-domain\u003e:443 ","date":"2025-05-29","objectID":"/posts/teleport/:1:4","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"👤 Step 5: Create a Teleport Admin User sudo tctl users add teleport-admin --roles=editor,access --logins=root,ubuntu Teleport will print an invite link like: https://teleport.\u003cyour-domain\u003e:443/web/invite/abc123... Open the link to set a password and register your MFA device. ","date":"2025-05-29","objectID":"/posts/teleport/:1:5","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"🔐 Configure Windows RDP Access ","date":"2025-05-29","objectID":"/posts/teleport/:2:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"🪟 Step 1: Prepare Windows for RDP On your Windows machine, open Command Prompt (cmd.exe) as Administrator and dowload: curl.exe -fo teleport.cer https://teleport.\u003cyour-domain\u003e/webapi/auth/export?type=windows curl.exe -fo teleport-windows-auth-setup-v17.4.8-amd64.exe https://cdn.teleport.dev/teleport-windows-auth-setup-v17.4.8-amd64.exe Double-click the .exe installer to run the Teleport Windows Auth Setup program. Choose certificat Restart the computer after installation. ","date":"2025-05-29","objectID":"/posts/teleport/:2:1","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"🔐 Step 2: Generate Join Token for RDP on Linux Server SSH into your Teleport Auth Server and run: tctl tokens add --type=windowsdesktop Copy the token output to your RDP proxy server, e.g., /tmp/token ","date":"2025-05-29","objectID":"/posts/teleport/:2:2","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"⚙️ Step 2: Configure windows_desktop_service on RDP Proxy Update or create the relevant section in /etc/teleport.yaml: windows_desktop_service: enabled: \"yes\" static_hosts: - name: Windows ad: false addr: 192.168.1.10:3389 labels: server: home host: Win10 Then restart the service: sudo systemctl restart teleport ","date":"2025-05-29","objectID":"/posts/teleport/:2:3","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"🌐 Configure Internal Web Application Access ","date":"2025-05-29","objectID":"/posts/teleport/:3:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"🔐 Step 1: Generate Join Token for App Service Run on the Auth server: tctl tokens add --type=app Copy the token to the target server that will proxy your internal app. ","date":"2025-05-29","objectID":"/posts/teleport/:3:1","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"⚙️ Step 2: Configure app_service in teleport.yaml Edit /etc/teleport.yaml on the node that will serve the app: app_service: enabled: \"yes\" apps: - name: opnsense uri: \"https://192.168.1.1:8080\" public_addr: \"opnsense.teleport.\u003cyour-domain\u003e.com\" insecure_skip_verify: true labels: env: net host: OPNsense Restart teleport sudo systemctl restart teleport ","date":"2025-05-29","objectID":"/posts/teleport/:3:2","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["networking"],"content":"🔍 Troubleshooting ACME TLS fails? Ensure port 80 and 443 are open Check DNS records Windows host not visible? Check RDP is enabled on the Windows machine Check firewall rules Web UI unreachable? Check teleport.yaml Check logs: journalctl -u teleport or docker logs teleport 💡 Need a Docker setup? Want to automate the RDP proxy deployment? Check out my GitHub repo or contact me directly. ","date":"2025-05-29","objectID":"/posts/teleport/:4:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":null,"content":"Vitalii Stepchuk IT Spezialist 📍 Unterer Stadtgraben 5, 8730 Uznach 📞 +41 79 615 42 18 ✉️ v.stepchuk@topli.ch 🗓️ Geboren am 01.11.1984 🇺🇦 Nationalität: Ukraine, Aufenthaltsbewilligung “S” 🚗 Führerausweis: Kat. B ","date":"2025-05-29","objectID":"/cv/:0:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"🗣️ Sprachkenntnisse Ukrainisch: Muttersprache Russisch: Muttersprachliches Niveau Deutsch: Gute Kenntnisse Englisch: Gute Kenntnisse ","date":"2025-05-29","objectID":"/cv/:1:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"💻 IT-Kenntnisse Betriebssysteme: Linux, macOS, Windows Netzwerke: Switches, Firewalls, WLAN Virtualisierung: VMware, Hyper-V, Docker Scripting: Bash, PowerShell, Python VoIP: 3CX, Asterisk Überwachung: Zabbix, Icinga Backup: VEEAM, Acronis Hardware: Server, PC, Laptops ","date":"2025-05-29","objectID":"/cv/:2:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"🧑‍💻 Berufserfahrung ","date":"2025-05-29","objectID":"/cv/:3:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"System Ingenieur Praktikum – SIDMAR AG Mai – Dez. 2024 | Mönchaltorf, Schweiz Windows und Linux Themen: RDS-Umgebungen, System- und Sicherheitsmanagement, Log Managment, HA und Load Balancing, ADFS, VM, VPN-Server, Acronis Backup, Zabbix, Icinga, 3CX ","date":"2025-05-29","objectID":"/cv/:3:1","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"IT-Direktor – Contact Center Alfa 2017 – 2022 | Kiew, Ukraine Entwicklung und Bereitstellung der Serverinfrastruktur und des Netzwerks des Unternehmens. Implementierung und Wartung von Telefonie-, Überwachungs-, Backup-, Stromversorgungs- und Sicherheitssystemen. ","date":"2025-05-29","objectID":"/cv/:3:2","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"Projektleiter – Miner.bz (Einzelunternehmen) 2016 – 2022 | Kiew, Ukraine Entwurf, Aufbau und Wartung eines Datenzentrums für das Mining Erstellung und Konfiguration von Spezialcomputern für das Mining ","date":"2025-05-29","objectID":"/cv/:3:3","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"Projektleiter – Posolskyi (Einzelunternehmen) 2015 – 2016 | Kiew, Ukraine Entwurf und Implementierung von Videogegensprechanlagen und Videoüberwachungssystemen auf Basis eines IP-Netzwerks für einen Wohnkomplex mit 120 Wohnungen. ","date":"2025-05-29","objectID":"/cv/:3:4","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"Systemadministrator – Infolife 2009 – 2015 | Kiew, Ukraine IT-Administrator des Unternehmens Einrichtung und Wartung des Netzwerks zwischen den Büros des Unternehmens sowie des auf GSM-Gateways basierenden Telefonsystems und Akquisition des Hardware Equipments ","date":"2025-05-29","objectID":"/cv/:3:5","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"IT Specialist – Topas 2003 – 2009 | Kiew, Ukraine Sales Manager Revisionen von Computer Zusammenbau, Prüfung und Installieren eines Betriebssystems mit Anwendungen auf Computern ","date":"2025-05-29","objectID":"/cv/:3:6","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"🎓 Ausbildung Ingenieur für Elektronik Nationale Technische Universität der Ukraine “Kyiv Polytechnic Institute” 2001 – 2008 | Kiew, Ukraine ","date":"2025-05-29","objectID":"/cv/:4:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"🤝 Freiwilliges Engagement IT-Support für Privatpersonen in der Schweiz ","date":"2025-05-29","objectID":"/cv/:5:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"🏔️ Persönliche Interessen Skifahren | Reisen | Fischen ","date":"2025-05-29","objectID":"/cv/:6:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":["linux"],"content":"🔐 Setting Up SSH Keys on Linux (Step-by-Step Guide) Using SSH keys is a safer and easier way to connect to Linux servers — no more typing your password every time. This guide will help you set up SSH keys, copy them to a remote server, and log in securely. ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:0:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"✅ Step 1: Check If You Already Have SSH Keys Open your terminal and run: ls ~/.ssh/id_*.pub If you see a file like id_ed25519.pub or id_rsa.pub, it means you already have a key. You can use that one or create a new one. ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:1:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"🛠 Step 2: Create a New SSH Key Pair To make a new SSH key, run: ssh-keygen -t ed25519 -C \"your_email@example.com\" On older systems, use ssh-keygen -t rsa -b 4096 instead. Press Enter to accept the default location (~/.ssh/id_ed25519) You can choose to add a passphrase (or leave it empty) This creates two files: id_ed25519 → your private key (keep it secret!) id_ed25519.pub → your public key (you’ll share this) ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:2:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"📤 Step 3: Add Your Public Key to the Remote Server ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:3:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"Option 1: Use ssh-copy-id (recommended) ssh-copy-id username@remote_server_ip Add Your Public Key to the Remote ESXI Server cat ~/.ssh/id_rsa.pub | ssh root@ESXI_IP 'cat \u003e\u003e /etc/ssh/keys-root/authorized_keys' This command adds your key to the remote server so you can log in without a password. ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:3:1","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"Option 2: Manual method Show your public key: cat ~/.ssh/id_ed25519.pub Copy the whole line Connect to your server and paste it into: nano ~/.ssh/authorized_keys ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:3:2","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"🚀 Step 4: Log In Without a Password Now try logging in: ssh username@remote_server_ip If everything is correct, you’ll connect without entering a password 🎉 ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:4:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"🔒 Step 5 (Optional): Turn Off Password Login This step is for extra security. Only do it if SSH keys are working! Open SSH settings on the server: sudo nano /etc/ssh/sshd_config Find and change these lines: PasswordAuthentication no ChallengeResponseAuthentication no UsePAM no Save and restart SSH: sudo systemctl restart sshd ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:5:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"💡 Helpful Tips Your private key must stay private (~/.ssh/id_ed25519) A passphrase adds extra protection Use an SSH config file to manage many servers: Create or edit this file: nano ~/.ssh/config Add this block: Host myserver HostName 192.168.1.10 User vitalii IdentityFile ~/.ssh/id_ed25519 Then you can connect by simply running: ssh myserver ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:6:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"🧩 Summary SSH keys help you: Log in faster Avoid typing passwords Stay secure Now you’re ready to manage your servers like a pro — safely and efficiently! ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:7:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["networking"],"content":"OPNsense is a powerful open-source firewall and routing platform based on FreeBSD. ","date":"2025-05-26","objectID":"/posts/opnsense/:0:0","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"1.1 Installing as VM Download the ISO Architecture: amd64 Image type: DVD ISO General VM Settings OS Type → FreeBSD (64-bit) Option Minimum My conf Recommended CPU 1 cores 2 cores multi core Memory 512 MB 2 GB ≥ 4 GB Disk Size 8 GB 16 GB 120 GB First-time login credentials: Username: installer Password: opnsense After logging in, the system will automatically launch the text-based installer. Accept license and keyboard layout Choose Install (UFS) or (ZFS) Select target disk Set a new password for the root user Wait for installation to complete Remove the ISO and reboot ","date":"2025-05-26","objectID":"/posts/opnsense/:1:0","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"1.2 First Login to OPNsense After reboot, you can log: From LAN network: https://opnsense.localdomain or https://192.168.1.1 From WAN we need disable Firewall (Shell): pfctl -d Default credentials: Username: root Password: opnsense 👉 System \u003e Wizard General Setup Set hostname, domain (optional), and DNS servers. Select your time zone. Configure interfaces (WAN / LAN). Set a new root password. ","date":"2025-05-26","objectID":"/posts/opnsense/:1:1","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"1.3 Configure WEB access from WAN 👉 Firewall \u003e Rules \u003e WAN add new Rule Protocol: TCP Destination: WAN address Destination port range From: (other) 8080 To: (other) 8080 👉 System \u003e Settings \u003e Administration Protocol: HTTPS access TCP Port: 8080 👉 System \u003e Firmware \u003e Plugins Install os-vmware ","date":"2025-05-26","objectID":"/posts/opnsense/:1:2","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"1.4 System Updates and Backup Configuration 👉 System \u003e Firmware \u003e Status Click Check for updates → then Apply updates. 👉 System \u003e Configuration \u003e Backups Download a local .xml backup of your configuration. You can also enable automatic backups to cloud services like Google Drive, Nextcloud, etc. ","date":"2025-05-26","objectID":"/posts/opnsense/:1:3","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"Useful Resources 📚 Official OPNsense Documentation 🎥 YouTube: OPNsense Tutorials ","date":"2025-05-26","objectID":"/posts/opnsense/:1:4","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.1 WireGuard Site-to-Site VPN Setup WireGuard is a fast and modern VPN solution known for its simplicity and performance. ✅ What You’ll Need Two OPNsense firewalls with internet access (Site A and Site B) Static or dynamic public IPs (DDNS works) Site A -\u003e WAN IP 203.0.113.1 and LAN IP 192.168.1.1/24 Site B -\u003e WAN IP 203.0.113.2 and LAN IP 192.168.2.1/24 WireGuard plugin installed (os-wireguard) ","date":"2025-05-26","objectID":"/posts/opnsense/:2:0","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.2 Create WireGuard Instance 👉 VPN \u003e WireGuard \u003e Instances Click + Add to create a new instance. Enabled Name: site-a on Site A / site-b on Site B Click ⚙️ Generate new keypair Listen Port 51820 Tunnel Address Site A: 10.2.2.1/24 Site B: 10.2.2.2/24 Peers: it will be needed after peer created 💾 Press Save and Apply ⚠️ After saving, copy the Public Key. You’ll need it on the remote site. ","date":"2025-05-26","objectID":"/posts/opnsense/:2:1","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.3 Configure Peer 👉 VPN \u003e WireGuard \u003e Peers Click + Add to create a new peer. Enabled Name: site-b on Site A / site-a on Site B Public Key of the remote site Allowed IPs: remote local subnet and Instance IP On Site A: 10.2.2.2/32 192.168.2.0/24 On Site B: 10.2.2.1/32 192.168.1.0/24 Endpoint Address: remote WAN IP (or DDNS) On Site A: 203.0.113.2 On Site B: 203.0.113.1 Endpoint Port: 51820 💾 Press Save and Apply ⚠️ Now go back to Instances, edit your instance, and add this peer to Peers. 💾 Press Save and Apply Enable WireGuard and 💾 Press Apply ","date":"2025-05-26","objectID":"/posts/opnsense/:2:2","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.4 Create Interfaces 👉 Interfaces \u003e Assignments Assign the new WireGuard interface (wg0) Enable it: Set name: WG_SITEA / WG_SITEB 💾 Press Save and Apply ","date":"2025-05-26","objectID":"/posts/opnsense/:2:3","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.5 Set Up Firewall Rules 👉 Firewall \u003e Settings \u003e Normalization Interface: WireGuard (Group) Direction: Any Protocol: any Source: any Destination: any Destination port: any Description: Wireguard MSS Clamping Max mss: 1380 or lower, subtract at least 40 bytes from the Wireguard MTU 👉 Firewall \u003e Rules \u003e WAN Action: Pass Interface: WAN Direction: In TCP/IP Version: IPv4 Protocol: UDP Source: Remote WAN IP On Site A: 203.0.113.1 On Site B: 203.0.113.2 Destination: WAN address Destination port: 51820 Description: On Site A: Allow Wireguard from Site B to Site A On Site B: Allow Wireguard from Site A to Site B 👉 Firewall \u003e Rules \u003e LAN Action: Pass Interface: LAN Direction: In TCP/IP Version: IPv4 Protocol: Any Source: Remote LAN IP On Site A: 192.168.2.0/24 On Site B: 192.168.1.0/24 Destination: LAN net Destination port: 51820 Description: On Site A: Allow LAN Site B to LAN Site A On Site B: Allow LAN Site A to LAN Site B 👉 Firewall \u003e Rules \u003e Wireguard (Group) Action: Pass Interface: Wireguard (Group) Direction: In TCP/IP Version: IPv4 Protocol: Any Source: Remote LAN IP On Site A: 192.168.2.0/24 On Site B: 192.168.1.0/24 Destination: LAN net Destination port: 51820 Description: On Site A: Allow LAN Site B to LAN Site A On Site B: Allow LAN Site A to LAN Site B 👉 VPN \u003e WireGuard \u003e Status ✅ Check for handshake and endpoint status. 👉 Interfaces \u003e Diagnostics \u003e Ping Try pinging remote LAN IP (e.g., from 192.168.1.1 → 192.168.2.1) ","date":"2025-05-26","objectID":"/posts/opnsense/:2:4","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"Useful Resources 📚 Official OPNsense Documentation ","date":"2025-05-26","objectID":"/posts/opnsense/:2:5","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"3.1 IPsec VPN for iOS and macOS This guide walks you through the setup of an IPsec VPN server on OPNsense that works with iOS and macOS devices. Tested with: OPNsense 23.1.7_3 – 24.7.5_3 iOS 16+ macOS Monterey+ ","date":"2025-05-26","objectID":"/posts/opnsense/:3:0","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"👥 3.1 (Optional) Create a VPN Group System → Access → Groups → Add Group name: VPN Description: VPN users ","date":"2025-05-26","objectID":"/posts/opnsense/:3:1","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"👤 3.2 Create a VPN User System → Access → Users → Add Username: vpnuser Password: [secure password] Member Of: VPN (optional, if you created the group) ","date":"2025-05-26","objectID":"/posts/opnsense/:3:2","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"🌐 3.3 Configure IPsec Mobile Clients VPN → IPsec → Mobile Clients ✅ Enable IPsec Mobile Client Support Backend for authentication: Local Database Enforce local group: VPN (optional) IP Address Pool ✅ Provide a virtual IPv4 address Address Pool: 192.168.2.0/24 DNS Servers ✅ Provide DNS server list Server 1: 192.168.1.1 (local router IP) Server 2: 8.8.8.8 Server 3: 8.8.4.4 Phase 2 PFS Group: Off Save and Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:3","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"🔑 3.4 Create Phase 1 Click “Create Phase1” at the top blue bar. Connection method: default Key Exchange version: auto Interface: WAN Description: Mobile VPN Authentication: Mutual PSK + Xauth My identifier: My IP address Pre-Shared Key: [store securely] Algorithms AES 256 Hash: SHA256, SHA384, SHA512 DH group: 2, 5, 14–18 ✅ Install policy NAT Traversal: Enable Lifetime: 28800 Save and Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:4","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"🔄 3.5 Create Phase 2 VPN → IPsec → Tunnel Settings Click ➕ in Commands column of Phase 1 row. Mode: Tunnel IPv4 Type: Network Address: 0.0.0.0/0 Protocol: ESP Encryption: AES128, AES192, AES256 Hash: SHA256, SHA384, SHA512 PFS: Off Lifetime: 3600 Save and Apply ","date":"2025-05-26","objectID":"/posts/opnsense/:3:5","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"✅ 3.6 Enable IPsec VPN → IPsec → Tunnel Settings ✅ Enable IPsec (bottom of page) Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:6","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"🔥 3.7 Configure Firewall: WAN Rules Firewall → Rules → WAN → Add 3 rules: Protocol: ESP → Destination: WAN → Description: IPsec ESP Protocol: TCP/UDP → Port: ISAKMP (500) → Description: IPsec ISAKMP Protocol: UDP → Port: NAT-T (4500) → Description: IPsec NAT-T ✅ Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:7","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"🔒 3.8 Configure Firewall: IPsec Rules Firewall → Rules → IPsec Protocol: Any Source: Any Destination: Any ✅ Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:8","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"🌍 3.9 Outbound NAT Firewall → NAT → Outbound Mode: Automatic outbound NAT Confirm 192.168.2.0/24 is listed ","date":"2025-05-26","objectID":"/posts/opnsense/:3:9","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"📡 3.10 Allow DNS from VPN Services → Unbound DNS → Access Lists → Add Access List name: 192.168.2.0/24 Action: Allow Network: 192.168.2.0/24 Description: VPN DNS access Save and Apply ","date":"2025-05-26","objectID":"/posts/opnsense/:3:10","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"🔄 3.11 (Optional) Allow Multi-Device Connections In Phase 1, set: Unique ID: no This allows one user to connect from multiple devices. ","date":"2025-05-26","objectID":"/posts/opnsense/:3:11","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"📲 3.12 iPhone VPN Configuration Settings → VPN → Add VPN Configuration… Type: IPsec Server: [OPNsense public IP] Account: vpnuser Password: [user password] Secret: [Pre-Shared Key] Leave “Group Name” empty ","date":"2025-05-26","objectID":"/posts/opnsense/:3:12","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"💻 3.13 macOS VPN Configuration System Preferences → Network → + → Interface: VPN VPN Type: Cisco IPSec Server Address: [OPNsense public IP] Account Name: vpnuser Password: [user password] Shared Secret: [Pre-Shared Key] ✅ Save and Connect ","date":"2025-05-26","objectID":"/posts/opnsense/:3:13","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"💡 Troubleshooting If DNS doesn’t work — try restarting the router Double-check firewall and mobile client settings Use strong, unique Pre-Shared Keys and passwords 📝 Published on blog.topli.ch ","date":"2025-05-26","objectID":"/posts/opnsense/:3:14","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"}]