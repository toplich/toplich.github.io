[{"categories":["Access Infrastructure"],"content":"ğŸš€ Teleport is a modern open-source platform for secure access to your infrastructure: SSH, Kubernetes, databases, web apps, and even Windows desktops (RDP). ","date":"2025-05-29","objectID":"/posts/teleport/:0:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["Access Infrastructure"],"content":"Teleport Setup open-source ZTNA Platform âœ… Requirements A Linux server with a public IP address and DNS name (e.g., teleport.\u003cyour-domain\u003e) One or more Windows and Linux machines Basic terminal access (Linux + Windows) ","date":"2025-05-29","objectID":"/posts/teleport/:1:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["Access Infrastructure"],"content":"ğŸ“Œ Step 1: Configure DNS Create the following A records for your domain: `teleport.\u003cyour-domain\u003e` â†’ your Linux server public IP *.`teleport.\u003cyour-domain\u003e` â†’ your Linux server public IP This is required for Letâ€™s Encrypt (ACME) to issue a valid TLS certificate. ","date":"2025-05-29","objectID":"/posts/teleport/:1:1","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["Access Infrastructure"],"content":"ğŸ“¥ Step 2: Install Teleport on Linux Install the latest stable version of Teleport: curl https://cdn.teleport.dev/install.sh | bash -s 17.4.8 ","date":"2025-05-29","objectID":"/posts/teleport/:1:2","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["Access Infrastructure"],"content":"âš™ï¸ Step 3: Generate Teleport Configuration sudo teleport configure -o file --acme --acme-email=`teleport@yourdomain.com` --cluster-name=`teleport.\u003cyour-domain\u003e` This creates /etc/teleport.yaml with TLS auto-renewal using Letâ€™s Encrypt. My working configuration version: v3 teleport: nodename: teleport.\u003cyour-domain\u003e data_dir: /var/lib/teleport log: output: stderr severity: INFO format: output: text auth_service: enabled: true listen_addr: 0.0.0.0:3025 cluster_name: teleport.\u003cyour-domain\u003e proxy_listener_mode: multiplex proxy_service: enabled: true web_listen_addr: 0.0.0.0:443 public_addr: teleport.\u003cyour-domain\u003e:443 acme: enabled: true email: teleport@\u003cyour-domain\u003e windows_desktop_service: enabled: \"no\" ssh_service: enabled: \"no\" ","date":"2025-05-29","objectID":"/posts/teleport/:1:3","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["Access Infrastructure"],"content":"â–¶ï¸ Step 4: Start Teleport sudo systemctl enable teleport sudo systemctl start teleport Then open your browser and visit: https://teleport.\u003cyour-domain\u003e:443 ","date":"2025-05-29","objectID":"/posts/teleport/:1:4","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["Access Infrastructure"],"content":"ğŸ‘¤ Step 5: Create a Teleport Admin User sudo tctl users add teleport-admin --roles=editor,access --logins=root,ubuntu Teleport will print an invite link like: https://teleport.\u003cyour-domain\u003e:443/web/invite/abc123... Open the link to set a password and register your MFA device. ","date":"2025-05-29","objectID":"/posts/teleport/:1:5","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["Access Infrastructure"],"content":"ğŸ” Configure Windows RDP Access ","date":"2025-05-29","objectID":"/posts/teleport/:2:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["Access Infrastructure"],"content":"ğŸªŸ Step 1: Prepare Windows for RDP On your Windows machine, open Command Prompt (cmd.exe) as Administrator and dowload: curl.exe -fo teleport.cer https://teleport.\u003cyour-domain\u003e/webapi/auth/export?type=windows curl.exe -fo teleport-windows-auth-setup-v17.4.8-amd64.exe https://cdn.teleport.dev/teleport-windows-auth-setup-v17.4.8-amd64.exe Double-click the .exe installer to run the Teleport Windows Auth Setup program. Choose certificat Restart the computer after installation. ","date":"2025-05-29","objectID":"/posts/teleport/:2:1","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["Access Infrastructure"],"content":"ğŸ” Step 2: Generate Join Token for RDP on Linux Server SSH into your Teleport Auth Server and run: tctl tokens add --type=windowsdesktop Copy the token output to your RDP proxy server, e.g., /tmp/token ","date":"2025-05-29","objectID":"/posts/teleport/:2:2","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["Access Infrastructure"],"content":"âš™ï¸ Step 2: Configure windows_desktop_service on RDP Proxy Update or create the relevant section in /etc/teleport.yaml: windows_desktop_service: enabled: \"yes\" static_hosts: - name: Windows ad: false addr: 192.168.1.10:3389 labels: server: home host: Win10 Then restart the service: sudo systemctl restart teleport ","date":"2025-05-29","objectID":"/posts/teleport/:2:3","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["Access Infrastructure"],"content":"ğŸŒ Configure Internal Web Application Access ","date":"2025-05-29","objectID":"/posts/teleport/:3:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["Access Infrastructure"],"content":"ğŸ” Step 1: Generate Join Token for App Service Run on the Auth server: tctl tokens add --type=app Copy the token to the target server that will proxy your internal app. ","date":"2025-05-29","objectID":"/posts/teleport/:3:1","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["Access Infrastructure"],"content":"âš™ï¸ Step 2: Configure app_service in teleport.yaml Edit /etc/teleport.yaml on the node that will serve the app: app_service: enabled: \"yes\" apps: - name: opnsense uri: \"https://192.168.1.1:8080\" public_addr: \"opnsense.teleport.\u003cyour-domain\u003e.com\" insecure_skip_verify: true labels: env: net host: OPNsense Restart teleport sudo systemctl restart teleport ","date":"2025-05-29","objectID":"/posts/teleport/:3:2","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":["Access Infrastructure"],"content":"ğŸ” Troubleshooting ACME TLS fails? Ensure port 80 and 443 are open Check DNS records Windows host not visible? Check RDP is enabled on the Windows machine Check firewall rules Web UI unreachable? Check teleport.yaml Check logs: journalctl -u teleport or docker logs teleport ğŸ’¡ Need a Docker setup? Want to automate the RDP proxy deployment? Check out my GitHub repo or contact me directly. ","date":"2025-05-29","objectID":"/posts/teleport/:4:0","tags":["teleport","rdp","linux","access","self-hosted","zero trust"],"title":"How to Deploy a Zero Trust Cluster","uri":"/posts/teleport/"},{"categories":null,"content":"Vitalii Stepchuk IT Spezialist ğŸ“ Unterer Stadtgraben 5, 8730 Uznach ğŸ“ +41 79 615 42 18 âœ‰ï¸ v.stepchuk@topli.ch ğŸ—“ï¸ Geboren am 01.11.1984 ğŸ‡ºğŸ‡¦ NationalitÃ¤t: Ukraine, Aufenthaltsbewilligung â€œSâ€ ğŸš— FÃ¼hrerausweis: Kat. B ","date":"2025-05-29","objectID":"/cv/:0:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"ğŸ—£ï¸ Sprachkenntnisse Ukrainisch: Muttersprache Russisch: Muttersprachliches Niveau Deutsch: Gute Kenntnisse Englisch: Gute Kenntnisse ","date":"2025-05-29","objectID":"/cv/:1:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"ğŸ’» IT-Kenntnisse Betriebssysteme: Linux, macOS, Windows Netzwerke: Switches, Firewalls, WLAN Virtualisierung: VMware, Hyper-V, Docker Scripting: Bash, PowerShell, Python VoIP: 3CX, Asterisk Ãœberwachung: Zabbix, Icinga Backup: VEEAM, Acronis Hardware: Server, PC, Laptops ","date":"2025-05-29","objectID":"/cv/:2:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"ğŸ§‘â€ğŸ’» Berufserfahrung ","date":"2025-05-29","objectID":"/cv/:3:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"System Ingenieur Praktikum â€“ SIDMAR AG Mai â€“ Dez. 2024 | MÃ¶nchaltorf, Schweiz Windows und Linux Themen: RDS-Umgebungen, System- und Sicherheitsmanagement, Log Managment, HA und Load Balancing, ADFS, VM, VPN-Server, Acronis Backup, Zabbix, Icinga, 3CX ","date":"2025-05-29","objectID":"/cv/:3:1","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"IT-Direktor â€“ Contact Center Alfa 2017 â€“ 2022 | Kiew, Ukraine Entwicklung und Bereitstellung der Serverinfrastruktur und des Netzwerks des Unternehmens. Implementierung und Wartung von Telefonie-, Ãœberwachungs-, Backup-, Stromversorgungs- und Sicherheitssystemen. ","date":"2025-05-29","objectID":"/cv/:3:2","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"Projektleiter â€“ Miner.bz (Einzelunternehmen) 2016 â€“ 2022 | Kiew, Ukraine Entwurf, Aufbau und Wartung eines Datenzentrums fÃ¼r das Mining Erstellung und Konfiguration von Spezialcomputern fÃ¼r das Mining ","date":"2025-05-29","objectID":"/cv/:3:3","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"Projektleiter â€“ Posolskyi (Einzelunternehmen) 2015 â€“ 2016 | Kiew, Ukraine Entwurf und Implementierung von Videogegensprechanlagen und VideoÃ¼berwachungssystemen auf Basis eines IP-Netzwerks fÃ¼r einen Wohnkomplex mit 120 Wohnungen. ","date":"2025-05-29","objectID":"/cv/:3:4","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"Systemadministrator â€“ Infolife 2009 â€“ 2015 | Kiew, Ukraine IT-Administrator des Unternehmens Einrichtung und Wartung des Netzwerks zwischen den BÃ¼ros des Unternehmens sowie des auf GSM-Gateways basierenden Telefonsystems und Akquisition des Hardware Equipments ","date":"2025-05-29","objectID":"/cv/:3:5","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"IT Specialist â€“ Topas 2003 â€“ 2009 | Kiew, Ukraine Sales Manager Revisionen von Computer Zusammenbau, PrÃ¼fung und Installieren eines Betriebssystems mit Anwendungen auf Computern ","date":"2025-05-29","objectID":"/cv/:3:6","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"ğŸ“ Ausbildung Ingenieur fÃ¼r Elektronik Nationale Technische UniversitÃ¤t der Ukraine â€œKyiv Polytechnic Instituteâ€ 2001 â€“ 2008 | Kiew, Ukraine ","date":"2025-05-29","objectID":"/cv/:4:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"ğŸ¤ Freiwilliges Engagement IT-Support fÃ¼r Privatpersonen in der Schweiz ","date":"2025-05-29","objectID":"/cv/:5:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":null,"content":"ğŸ”ï¸ PersÃ¶nliche Interessen Skifahren | Reisen | Fischen ","date":"2025-05-29","objectID":"/cv/:6:0","tags":null,"title":"Lebenslauf","uri":"/cv/"},{"categories":["linux"],"content":"ğŸ” Setting Up SSH Keys on Linux (Step-by-Step Guide) Using SSH keys is a safer and easier way to connect to Linux servers â€” no more typing your password every time. This guide will help you set up SSH keys, copy them to a remote server, and log in securely. ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:0:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"âœ… Step 1: Check If You Already Have SSH Keys Open your terminal and run: ls ~/.ssh/id_*.pub If you see a file like id_ed25519.pub or id_rsa.pub, it means you already have a key. You can use that one or create a new one. ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:1:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"ğŸ›  Step 2: Create a New SSH Key Pair To make a new SSH key, run: ssh-keygen -t ed25519 -C \"your_email@example.com\" On older systems, use ssh-keygen -t rsa -b 4096 instead. Press Enter to accept the default location (~/.ssh/id_ed25519) You can choose to add a passphrase (or leave it empty) This creates two files: id_ed25519 â†’ your private key (keep it secret!) id_ed25519.pub â†’ your public key (youâ€™ll share this) ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:2:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"ğŸ“¤ Step 3: Add Your Public Key to the Remote Server ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:3:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"Option 1: Use ssh-copy-id (recommended) ssh-copy-id username@remote_server_ip Add Your Public Key to the Remote ESXI Server cat ~/.ssh/id_rsa.pub | ssh root@ESXI_IP 'cat \u003e\u003e /etc/ssh/keys-root/authorized_keys' This command adds your key to the remote server so you can log in without a password. ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:3:1","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"Option 2: Manual method Show your public key: cat ~/.ssh/id_ed25519.pub Copy the whole line Connect to your server and paste it into: nano ~/.ssh/authorized_keys ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:3:2","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"ğŸš€ Step 4: Log In Without a Password Now try logging in: ssh username@remote_server_ip If everything is correct, youâ€™ll connect without entering a password ğŸ‰ ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:4:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"ğŸ”’ Step 5 (Optional): Turn Off Password Login This step is for extra security. Only do it if SSH keys are working! Open SSH settings on the server: sudo nano /etc/ssh/sshd_config Find and change these lines: PasswordAuthentication no ChallengeResponseAuthentication no UsePAM no Save and restart SSH: sudo systemctl restart sshd ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:5:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"ğŸ’¡ Helpful Tips Your private key must stay private (~/.ssh/id_ed25519) A passphrase adds extra protection Use an SSH config file to manage many servers: Create or edit this file: nano ~/.ssh/config Add this block: Host myserver HostName 192.168.1.10 User vitalii IdentityFile ~/.ssh/id_ed25519 Then you can connect by simply running: ssh myserver ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:6:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["linux"],"content":"ğŸ§© Summary SSH keys help you: Log in faster Avoid typing passwords Stay secure Now youâ€™re ready to manage your servers like a pro â€” safely and efficiently! ","date":"2025-05-28","objectID":"/posts/ssh-keys-linux/:7:0","tags":["SSH","Linux","Security"],"title":"How to Set Up SSH Keys on Linux","uri":"/posts/ssh-keys-linux/"},{"categories":["networking"],"content":"OPNsense is a powerful open-source firewall and routing platform based on FreeBSD. ","date":"2025-05-26","objectID":"/posts/opnsense/:0:0","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"1.1 Installing as VM Download the ISO Architecture: amd64 Image type: DVD ISO General VM Settings OS Type â†’ FreeBSD (64-bit) Option Minimum My conf Recommended CPU 1 cores 2 cores multi core Memory 512 MB 2 GB â‰¥ 4 GB Disk Size 8 GB 16 GB 120 GB First-time login credentials: Username: installer Password: opnsense After logging in, the system will automatically launch the text-based installer. Accept license and keyboard layout Choose Install (UFS) or (ZFS) Select target disk Set a new password for the root user Wait for installation to complete Remove the ISO and reboot ","date":"2025-05-26","objectID":"/posts/opnsense/:1:0","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"1.2 First Login to OPNsense After reboot, you can log: From LAN network: https://opnsense.localdomain or https://192.168.1.1 From WAN we need disable Firewall (Shell): pfctl -d Default credentials: Username: root Password: opnsense ğŸ‘‰ System \u003e Wizard General Setup Set hostname, domain (optional), and DNS servers. Select your time zone. Configure interfaces (WAN / LAN). Set a new root password. ","date":"2025-05-26","objectID":"/posts/opnsense/:1:1","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"1.3 Configure WEB access from WAN ğŸ‘‰ Firewall \u003e Rules \u003e WAN add new Rule Protocol: TCP Destination: WAN address Destination port range From: (other) 8080 To: (other) 8080 ğŸ‘‰ System \u003e Settings \u003e Administration Protocol: HTTPS access TCP Port: 8080 ğŸ‘‰ System \u003e Firmware \u003e Plugins Install os-vmware ","date":"2025-05-26","objectID":"/posts/opnsense/:1:2","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"1.4 System Updates and Backup Configuration ğŸ‘‰ System \u003e Firmware \u003e Status Click Check for updates â†’ then Apply updates. ğŸ‘‰ System \u003e Configuration \u003e Backups Download a local .xml backup of your configuration. You can also enable automatic backups to cloud services like Google Drive, Nextcloud, etc. ","date":"2025-05-26","objectID":"/posts/opnsense/:1:3","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"Useful Resources ğŸ“š Official OPNsense Documentation ğŸ¥ YouTube: OPNsense Tutorials ","date":"2025-05-26","objectID":"/posts/opnsense/:1:4","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.1 WireGuard Site-to-Site VPN Setup WireGuard is a fast and modern VPN solution known for its simplicity and performance. âœ… What Youâ€™ll Need Two OPNsense firewalls with internet access (Site A and Site B) Static or dynamic public IPs (DDNS works) Site A -\u003e WAN IP 203.0.113.1 and LAN IP 192.168.1.1/24 Site B -\u003e WAN IP 203.0.113.2 and LAN IP 192.168.2.1/24 WireGuard plugin installed (os-wireguard) ","date":"2025-05-26","objectID":"/posts/opnsense/:2:0","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.2 Create WireGuard Instance ğŸ‘‰ VPN \u003e WireGuard \u003e Instances Click + Add to create a new instance. Enabled Name: site-a on Site A / site-b on Site B Click âš™ï¸ Generate new keypair Listen Port 51820 Tunnel Address Site A: 10.2.2.1/24 Site B: 10.2.2.2/24 Peers: it will be needed after peer created ğŸ’¾ Press Save and Apply âš ï¸ After saving, copy the Public Key. Youâ€™ll need it on the remote site. ","date":"2025-05-26","objectID":"/posts/opnsense/:2:1","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.3 Configure Peer ğŸ‘‰ VPN \u003e WireGuard \u003e Peers Click + Add to create a new peer. Enabled Name: site-b on Site A / site-a on Site B Public Key of the remote site Allowed IPs: remote local subnet and Instance IP On Site A: 10.2.2.2/32 192.168.2.0/24 On Site B: 10.2.2.1/32 192.168.1.0/24 Endpoint Address: remote WAN IP (or DDNS) On Site A: 203.0.113.2 On Site B: 203.0.113.1 Endpoint Port: 51820 ğŸ’¾ Press Save and Apply âš ï¸ Now go back to Instances, edit your instance, and add this peer to Peers. ğŸ’¾ Press Save and Apply Enable WireGuard and ğŸ’¾ Press Apply ","date":"2025-05-26","objectID":"/posts/opnsense/:2:2","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.4 Create Interfaces ğŸ‘‰ Interfaces \u003e Assignments Assign the new WireGuard interface (wg0) Enable it: Set name: WG_SITEA / WG_SITEB ğŸ’¾ Press Save and Apply ","date":"2025-05-26","objectID":"/posts/opnsense/:2:3","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"2.5 Set Up Firewall Rules ğŸ‘‰ Firewall \u003e Settings \u003e Normalization Interface: WireGuard (Group) Direction: Any Protocol: any Source: any Destination: any Destination port: any Description: Wireguard MSS Clamping Max mss: 1380 or lower, subtract at least 40 bytes from the Wireguard MTU ğŸ‘‰ Firewall \u003e Rules \u003e WAN Action: Pass Interface: WAN Direction: In TCP/IP Version: IPv4 Protocol: UDP Source: Remote WAN IP On Site A: 203.0.113.1 On Site B: 203.0.113.2 Destination: WAN address Destination port: 51820 Description: On Site A: Allow Wireguard from Site B to Site A On Site B: Allow Wireguard from Site A to Site B ğŸ‘‰ Firewall \u003e Rules \u003e LAN Action: Pass Interface: LAN Direction: In TCP/IP Version: IPv4 Protocol: Any Source: Remote LAN IP On Site A: 192.168.2.0/24 On Site B: 192.168.1.0/24 Destination: LAN net Destination port: 51820 Description: On Site A: Allow LAN Site B to LAN Site A On Site B: Allow LAN Site A to LAN Site B ğŸ‘‰ Firewall \u003e Rules \u003e Wireguard (Group) Action: Pass Interface: Wireguard (Group) Direction: In TCP/IP Version: IPv4 Protocol: Any Source: Remote LAN IP On Site A: 192.168.2.0/24 On Site B: 192.168.1.0/24 Destination: LAN net Destination port: 51820 Description: On Site A: Allow LAN Site B to LAN Site A On Site B: Allow LAN Site A to LAN Site B ğŸ‘‰ VPN \u003e WireGuard \u003e Status âœ… Check for handshake and endpoint status. ğŸ‘‰ Interfaces \u003e Diagnostics \u003e Ping Try pinging remote LAN IP (e.g., from 192.168.1.1 â†’ 192.168.2.1) ","date":"2025-05-26","objectID":"/posts/opnsense/:2:4","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"Useful Resources ğŸ“š Official OPNsense Documentation ","date":"2025-05-26","objectID":"/posts/opnsense/:2:5","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"3.1 IPsec VPN for iOS and macOS This guide walks you through the setup of an IPsec VPN server on OPNsense that works with iOS and macOS devices. Tested with: OPNsense 23.1.7_3 â€“ 24.7.5_3 iOS 16+ macOS Monterey+ ","date":"2025-05-26","objectID":"/posts/opnsense/:3:0","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ‘¥ 3.1 (Optional) Create a VPN Group System â†’ Access â†’ Groups â†’ Add Group name: VPN Description: VPN users ","date":"2025-05-26","objectID":"/posts/opnsense/:3:1","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ‘¤ 3.2 Create a VPN User System â†’ Access â†’ Users â†’ Add Username: vpnuser Password: [secure password] Member Of: VPN (optional, if you created the group) ","date":"2025-05-26","objectID":"/posts/opnsense/:3:2","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸŒ 3.3 Configure IPsec Mobile Clients VPN â†’ IPsec â†’ Mobile Clients âœ… Enable IPsec Mobile Client Support Backend for authentication: Local Database Enforce local group: VPN (optional) IP Address Pool âœ… Provide a virtual IPv4 address Address Pool: 192.168.2.0/24 DNS Servers âœ… Provide DNS server list Server 1: 192.168.1.1 (local router IP) Server 2: 8.8.8.8 Server 3: 8.8.4.4 Phase 2 PFS Group: Off Save and Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:3","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ”‘ 3.4 Create Phase 1 Click â€œCreate Phase1â€ at the top blue bar. Connection method: default Key Exchange version: auto Interface: WAN Description: Mobile VPN Authentication: Mutual PSK + Xauth My identifier: My IP address Pre-Shared Key: [store securely] Algorithms AES 256 Hash: SHA256, SHA384, SHA512 DH group: 2, 5, 14â€“18 âœ… Install policy NAT Traversal: Enable Lifetime: 28800 Save and Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:4","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ”„ 3.5 Create Phase 2 VPN â†’ IPsec â†’ Tunnel Settings Click â• in Commands column of Phase 1 row. Mode: Tunnel IPv4 Type: Network Address: 0.0.0.0/0 Protocol: ESP Encryption: AES128, AES192, AES256 Hash: SHA256, SHA384, SHA512 PFS: Off Lifetime: 3600 Save and Apply ","date":"2025-05-26","objectID":"/posts/opnsense/:3:5","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"âœ… 3.6 Enable IPsec VPN â†’ IPsec â†’ Tunnel Settings âœ… Enable IPsec (bottom of page) Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:6","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ”¥ 3.7 Configure Firewall: WAN Rules Firewall â†’ Rules â†’ WAN â†’ Add 3 rules: Protocol: ESP â†’ Destination: WAN â†’ Description: IPsec ESP Protocol: TCP/UDP â†’ Port: ISAKMP (500) â†’ Description: IPsec ISAKMP Protocol: UDP â†’ Port: NAT-T (4500) â†’ Description: IPsec NAT-T âœ… Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:7","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ”’ 3.8 Configure Firewall: IPsec Rules Firewall â†’ Rules â†’ IPsec Protocol: Any Source: Any Destination: Any âœ… Apply changes ","date":"2025-05-26","objectID":"/posts/opnsense/:3:8","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸŒ 3.9 Outbound NAT Firewall â†’ NAT â†’ Outbound Mode: Automatic outbound NAT Confirm 192.168.2.0/24 is listed ","date":"2025-05-26","objectID":"/posts/opnsense/:3:9","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ“¡ 3.10 Allow DNS from VPN Services â†’ Unbound DNS â†’ Access Lists â†’ Add Access List name: 192.168.2.0/24 Action: Allow Network: 192.168.2.0/24 Description: VPN DNS access Save and Apply ","date":"2025-05-26","objectID":"/posts/opnsense/:3:10","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ”„ 3.11 (Optional) Allow Multi-Device Connections In Phase 1, set: Unique ID: no This allows one user to connect from multiple devices. ","date":"2025-05-26","objectID":"/posts/opnsense/:3:11","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ“² 3.12 iPhone VPN Configuration Settings â†’ VPN â†’ Add VPN Configurationâ€¦ Type: IPsec Server: [OPNsense public IP] Account: vpnuser Password: [user password] Secret: [Pre-Shared Key] Leave â€œGroup Nameâ€ empty ","date":"2025-05-26","objectID":"/posts/opnsense/:3:12","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ’» 3.13 macOS VPN Configuration System Preferences â†’ Network â†’ + â†’ Interface: VPN VPN Type: Cisco IPSec Server Address: [OPNsense public IP] Account Name: vpnuser Password: [user password] Shared Secret: [Pre-Shared Key] âœ… Save and Connect ","date":"2025-05-26","objectID":"/posts/opnsense/:3:13","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"},{"categories":["networking"],"content":"ğŸ’¡ Troubleshooting If DNS doesnâ€™t work â€” try restarting the router Double-check firewall and mobile client settings Use strong, unique Pre-Shared Keys and passwords ğŸ“ Published on blog.topli.ch ","date":"2025-05-26","objectID":"/posts/opnsense/:3:14","tags":["Firewall","OPNsense","Network","VPN","WireGuard","IPsec","iOS","macOS"],"title":"OPNsense Setup: Basic Guide","uri":"/posts/opnsense/"}]